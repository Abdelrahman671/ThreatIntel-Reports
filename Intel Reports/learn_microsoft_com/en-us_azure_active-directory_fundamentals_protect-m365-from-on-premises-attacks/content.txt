<!DOCTYPE html><html
	class="hasSidebar hasPageActions hasBreadcrumb conceptual has-default-focus theme-light"
	lang="en-us"
	dir="ltr"
	data-authenticated="false"
	data-auth-status-determined="false"
	data-target="docs"
	x-ms-format-detection="none">

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta property="og:title" content="Protecting Microsoft 365 from on-premises attacks - Microsoft Entra" />
	<meta property="og:type" content="website" />
	<meta property="og:url" content="https://learn.microsoft.com/en-us/entra/architecture/protect-m365-from-on-premises-attacks" /><meta property="og:description" content="Learn how to configure your systems to help protect your Microsoft 365 cloud environment from on-premises compromise." /><meta property="og:image" content="https://learn.microsoft.com/en-us/media/open-graph-image.png" />

	<meta property="og:image:alt" content="Microsoft Learn" />

	<meta name="twitter:card" content="summary_large_image" />

	<meta name="twitter:site" content="@MicrosoftLearn" />

	<meta name="color-scheme" content="light dark"><meta name="author" content="janicericketts" />
<meta name="breadcrumb_path" content="/entra/breadcrumb/toc.json" />
<meta name="depot_name" content="MSDN.entra-docs" />
<meta name="description" content="Learn how to configure your systems to help protect your Microsoft 365 cloud environment from on-premises compromise." />
<meta name="document_id" content="2db67c67-5a3e-ac64-1bf2-06ba8ca7b80c" />
<meta name="document_version_independent_id" content="398bda18-6f0d-cab2-f5ad-1a9fd77fa5d8" />
<meta name="feedback_help_link_type" content="" />
<meta name="feedback_help_link_url" content="" />
<meta name="feedback_product_url" content="https://feedback.azure.com/d365community/forum/79b1327d-d925-ec11-b6e6-000d3a4f06a4" />
<meta name="feedback_system" content="Standard" />
<meta name="git_commit_id" content="6b3a10b4604ef7f446c57098f7cba78ad9dfd320" />
<meta name="gitcommit" content="https://github.com/MicrosoftDocs/entra-docs-pr/blob/6b3a10b4604ef7f446c57098f7cba78ad9dfd320/docs/architecture/protect-m365-from-on-premises-attacks.md" />
<meta name="locale" content="en-us" />
<meta name="manager" content="martinco" />
<meta name="ms.author" content="jricketts" />
<meta name="ms.custom" content="it-pro" />
<meta name="ms.custom" content="kr2b-contr-experiment" />
<meta name="ms.date" content="10/17/2024" />
<meta name="ms.reviewer" content="ajburnle" />
<meta name="ms.service" content="entra" />
<meta name="ms.subservice" content="architecture" />
<meta name="ms.topic" content="how-to" />
<meta name="original_content_git_url" content="https://github.com/MicrosoftDocs/entra-docs-pr/blob/live/docs/architecture/protect-m365-from-on-premises-attacks.md" />
<meta name="page_type" content="conceptual" />
<meta name="schema" content="Conceptual" />
<meta name="site_name" content="Docs" />
<meta name="toc_rel" content="toc.json" />
<meta name="uhfHeaderId" content="MSDocsHeader-Entra" />
<meta name="updated_at" content="2024-10-22 05:00 PM" />
<meta name="word_count" content="2582" />
<meta name="persistent_id" content="8a7fed76-56b7-2e3a-f773-f3d308e62b9d" />
	
	<meta name="cmProducts" content="https://authoring-docs-microsoft.poolparty.biz/devrel/1dd701e0-441f-4b0a-9806-aa47decc4e35" data-source="generated" />
	<meta name="cmProducts" content="https://microsoft-devrel.poolparty.biz/DevRelOfferingOntology/57eae307-c3a1-4cac-b645-1a899934bac8" data-source="generated" />
	<meta name="cmProducts" content="https://microsoft-devrel.poolparty.biz/DevRelOfferingOntology/1433a524-c01f-4b87-beab-670c040dea4f" data-source="generated" />
	
	<meta name="spProducts" content="https://authoring-docs-microsoft.poolparty.biz/devrel/0a2fc935-5977-4aa6-9f55-0be03bd2acb8" data-source="generated" />
	<meta name="spProducts" content="https://microsoft-devrel.poolparty.biz/DevRelOfferingOntology/ee561821-1ac7-45a8-9409-6ba5eb7a5b97" data-source="generated" />
	<meta name="spProducts" content="https://microsoft-devrel.poolparty.biz/DevRelOfferingOntology/312f1f05-a431-4193-8a4d-e6245d5966de" data-source="generated" />
	<meta name="scope" content="Microsoft Entra" /><meta name="github_feedback_content_git_url" content="https://github.com/MicrosoftDocs/entra-docs/blob/main/docs/architecture/protect-m365-from-on-premises-attacks.md" /><link href="https://learn.microsoft.com/en-us/entra/architecture/protect-m365-from-on-premises-attacks" rel="canonical"><title>Protecting Microsoft 365 from on-premises attacks - Microsoft Entra | Microsoft Learn</title><link rel="stylesheet" href="/static/assets/0.4.028516059/styles/site-ltr.css">

	<script id="msdocs-script">
	var msDocs = {environment: {
			supportLevel: 'production',
			accessLevel: 'online',
			reviewFeatures: false,
			systemContent: true,
			azurePortalHostname: 'portal.azure.com',
			legacyHosting: false,
			siteName: 'learn',
		},data: {
			timeOrigin: Date.now(),
			contentLocale: 'en-us',
			contentDir: 'ltr',
			userLocale: 'en-us',
			userDir: 'ltr',
			pageTemplate: 'Conceptual',
			brand: 'entra',
			context: {},
			hasBinaryRating: true,
			feedbackHelpLinkType:'',
			feedbackHelpLinkUrl:'',
			standardFeedback: true,
			showFeedbackReport: false,
			enableTutorialFeedback: false,
			feedbackSystem: 'Standard',
			feedbackGitHubRepo: 'MicrosoftDocs/entra-docs',
			feedbackProductUrl: 'https://feedback.azure.com/d365community/forum/79b1327d-d925-ec11-b6e6-000d3a4f06a4',extendBreadcrumb: false,isEditDisplayable: true,
			hideViewSource: false,
			hasPageActions: true,
			hasPrintButton: true,
			hasBookmark: true,
			hasShare: true,
			isPermissioned: false,
			isPrivateUnauthorized: false,hasRecommendations: true,contributors: [{ name: "janicericketts", url: "https://github.com/janicericketts" },{ name: "MicrosoftGuyJFlo", url: "https://github.com/MicrosoftGuyJFlo" },{ name: "rolyon", url: "https://github.com/rolyon" },{ name: "lorieide", url: "https://github.com/lorieide" },{ name: "Taojunshen", url: "https://github.com/Taojunshen" },{ name: "alexbuckgit", url: "https://github.com/alexbuckgit" },{ name: "shlipsey3", url: "https://github.com/shlipsey3" },{ name: "BryanLa", url: "https://github.com/BryanLa" }],},
		functions:{}
	};
	</script><script src="https://wcpstatic.microsoft.com/mscc/lib/v2/wcp-consent.js"></script>
	<script src="https://js.monitor.azure.com/scripts/c/ms.jsll-4.min.js"></script><script src="/static/assets/0.4.028516059/global/deprecation.js"></script><script src="/static/assets/0.4.028516059/scripts/en-us/index-docs.js"></script></head>

<body lang="en-us" dir="ltr">
	<div class="header-holder has-default-focus">
		<a href="#main" class="skip-to-main-link has-outline-color-text visually-hidden-until-focused position-fixed has-inner-focus focus-visible top-0 left-0 right-0 padding-xs has-text-centered has-body-background" tabindex="1">Skip to main content</a><div hidden id="cookie-consent-holder" data-test-id="cookie-consent-container"></div>

		<div id="unsupported-browser" style="
			background-color: white;
			color: black;
			padding: 16px;
			border-bottom: 1px solid grey;"
			hidden
		>
			<div style="max-width: 800px; margin: 0 auto;">
				<p style="font-size: 24px">This browser is no longer supported.</p>
				<p style="font-size: 16px; margin-top: 16px;">Upgrade to Microsoft Edge to take advantage of the latest features, security updates, and technical support.</p>
				<div style="margin-top: 12px;">
					<a href="https://go.microsoft.com/fwlink/p/?LinkID=2092881 "
						style="
						background-color: #0078d4;
						border: 1px solid #0078d4;
						color: white;
						padding: 6px 12px;
						border-radius: 2px;
						display: inline-block;
						">Download Microsoft Edge</a>
					<a href="https://learn.microsoft.com/en-us/lifecycle/faq/internet-explorer-microsoft-edge"
						style="
							background-color: white;
							padding: 6px 12px;
							border: 1px solid #505050;
							color: #171717;
							border-radius: 2px;
							display: inline-block;
							">More info about Internet Explorer and Microsoft Edge</a>
				</div>
			</div>
		</div>
		<!-- liquid-tag banners global -->

		<!-- site header -->
		<header id="ms--site-header" data-test-id="site-header-wrapper" role="banner" itemscope="itemscope" itemtype="http://schema.org/Organization">
			<div id="ms--mobile-nav" class="site-header display-none-tablet padding-inline-none gap-none" data-bi-name="mobile-header" data-test-id="mobile-header"></div>
			<div id="ms--primary-nav" class="site-header display-none display-flex-tablet" data-bi-name="L1-header" data-test-id="primary-header"></div>
			<div id="ms--secondary-nav" class="site-header display-none display-flex-tablet" data-bi-name="L2-header" data-test-id="secondary-header"></div>
		</header><div id="content-header" class="content-header uhf-container has-padding has-default-focus border-bottom-none" data-bi-name="content-header">
				<div class="content-header-controls margin-xxs margin-inline-sm-tablet">
					<button type="button" class="contents-button button button-sm margin-right-xxs" data-bi-name="contents-expand" aria-haspopup="true" data-contents-button>
						<span class="icon"><span class="docon docon-menu" aria-hidden="true"></span></span>
						<span class="contents-expand-title">Table of contents</span>
					</button>
					<button type="button" class="ap-collapse-behavior ap-expanded button button-sm" data-bi-name="ap-collapse" aria-controls="action-panel">
						<span class="icon"><span class="docon docon-exit-mode" aria-hidden="true"></span></span>
						<span>Exit focus mode</span>
					</button>
				</div>
			</div><div id="disclaimer-holder" class="has-overflow-hidden has-default-focus">
			<!-- liquid-tag banners sectional -->
		</div>
	</div>

	<div class="mainContainer  uhf-container has-default-focus" data-bi-name="body">

		<div class="columns has-large-gaps is-gapless-mobile "><div id="left-container" class="left-container is-hidden-mobile column is-one-third-tablet is-one-quarter-desktop">
				<nav id="affixed-left-container" class="margin-top-sm-tablet position-sticky display-flex flex-direction-column" aria-label="Primary"></nav>
			</div><!-- .primary-holder -->
			<section class="primary-holder column is-two-thirds-tablet is-three-quarters-desktop">
				<!--div.columns -->
				<div class="columns is-gapless-mobile has-large-gaps "><div id="main-column" class="column  is-full is-8-desktop">

						<main id="main" class="" role="main" data-bi-name="content" lang="en-us" dir="ltr"><!-- article-header -->
							<div id="article-header" class="background-color-body margin-top-sm-tablet margin-bottom-xs display-none-print">
								<div class="display-flex align-items-center "><details id="article-header-breadcrumbs-overflow-popover" class="popover" data-for="article-header-breadcrumbs">
										<summary class="button button-clear button-primary button-sm inner-focus" aria-label="All breadcrumbs">
											<span class="icon">
												<span class="docon docon-more"></span>
											</span>
										</summary>
										<div id="article-header-breadcrumbs-overflow" class="popover-content padding-none">

										</div>
									</details>

									<bread-crumbs id="article-header-breadcrumbs" data-test-id="article-header-breadcrumbs" class="overflow-hidden flex-grow-1 margin-right-sm margin-right-md-tablet margin-right-lg-desktop margin-left-negative-xxs padding-left-xxs"></bread-crumbs><div id="article-header-page-actions"  class="opacity-none margin-left-auto display-flex flex-wrap-no-wrap align-items-stretch"><a
											id="lang-link-tablet"
											class="button button-primary button-clear button-sm display-none display-inline-flex-tablet"
											title="Read in English" data-bi-name="language-toggle"
											data-read-in-link
											hidden>
											<span class="icon margin-none" aria-hidden="true" data-read-in-link-icon>
												<span class="docon docon-locale-globe"></span>
											</span>
											<span class="is-visually-hidden" data-read-in-link-text>Read in English</span>
										</a><button
												type="button"
												class="collection button button-clear button-sm button-primary display-none display-inline-flex-tablet"
												data-list-type="collection"
												data-bi-name="collection"
												title="Add to collection">
												<span class="icon margin-none" aria-hidden="true">
													<span class="docon docon-circle-addition"></span>
												</span>
												<span class="collection-status is-visually-hidden">Save</span>
											</button><a	data-contenteditbtn
												class="button button-clear button-sm text-decoration-none button-primary display-none display-inline-flex-tablet"
												aria-label="Edit"
												title="Edit This Document"
												data-bi-name="edit"
														href="https://github.com/MicrosoftDocs/entra-docs/blob/main/docs/architecture/protect-m365-from-on-premises-attacks.md"
														data-original_content_git_url="https://github.com/MicrosoftDocs/entra-docs-pr/blob/live/docs/architecture/protect-m365-from-on-premises-attacks.md"
														data-original_content_git_url_template="{repo}/blob/{branch}/docs/architecture/protect-m365-from-on-premises-attacks.md"
														data-pr_repo=""
														data-pr_branch="">
												<span class="icon margin-none" aria-hidden="true">
													<span class="docon docon-edit-outline"></span>
												</span>
											</a>
										<details class="popover popover-right" id="article-header-page-actions-overflow">
											<summary class="justify-content-flex-start button button-clear button-sm button-primary" aria-label="More actions" title="More actions">
												<span class="icon" aria-hidden="true">
													<span class="docon docon-more-vertical"></span>
												</span>
											</summary>
											<div class="popover-content padding-xs"><button
														data-page-action-item="overflow-mobile"
														type="button"
														class="justify-content-flex-start button-block button-sm has-inner-focus button button-clear display-none-tablet"
														data-bi-name="contents-expand"
														data-contents-button
														data-popover-close>
														<span class="icon">
															<span class="docon docon-editor-list-bullet" aria-hidden="true"></span>
														</span><span class="contents-expand-title">Table of contents</span></button><a
													id="lang-link-overflow"
													class="justify-content-flex-start button-sm has-inner-focus button button-clear button-block display-none-tablet"
													title="Read in English" data-bi-name="language-toggle"
													data-page-action-item="overflow-mobile"
													data-check-hidden="true"
													data-read-in-link
													hidden
													>
													<span class="icon" aria-hidden="true" data-read-in-link-icon>
														<span class="docon docon-locale-globe"></span>
													</span>
													<span data-read-in-link-text>Read in English</span>
												</a><button
														type="button"
														class="collection justify-content-flex-start button button-clear button-sm has-inner-focus button-block display-none-tablet"
														data-list-type="collection"
														data-bi-name="collection"
														title="Save"
														data-page-action-item="overflow-mobile"
														data-check-hidden="true"
														data-popover-close>
														<span class="icon" aria-hidden="true">
															<span class="docon docon-circle-addition"></span>
														</span>
														<span class="collection-status">Save</span>
													</button>

			 										
													<button
													 	type="button"
														class="collection justify-content-flex-start button button-clear button-sm has-inner-focus button-block display-none-tablet"
														data-list-type="plan"
														data-bi-name="plan"
														title="Add to Plan"
														data-page-action-item="overflow-mobile"
														data-check-hidden="true"
														data-popover-close
														hidden>
														<span class="icon" aria-hidden="true">
															<span class="docon docon-circle-addition"></span>
														</span>
														<span class="plan-status">Add to Plan</span>
													</button><a	data-contenteditbtn
														class="button button-clear button-block button-sm has-inner-focus justify-content-flex-start text-decoration-none display-none-tablet"
														aria-label="Edit"
														title="Edit This Document"
														data-bi-name="edit"
																href="https://github.com/MicrosoftDocs/entra-docs/blob/main/docs/architecture/protect-m365-from-on-premises-attacks.md"
																data-original_content_git_url="https://github.com/MicrosoftDocs/entra-docs-pr/blob/live/docs/architecture/protect-m365-from-on-premises-attacks.md"
																data-original_content_git_url_template="{repo}/blob/{branch}/docs/architecture/protect-m365-from-on-premises-attacks.md"
																data-pr_repo=""
																data-pr_branch="">
														<span class="icon" aria-hidden="true">
															<span class="docon docon-edit-outline"></span>
														</span>
														<span>Edit</span>
													</a><div aria-hidden="true" class="margin-none" data-page-action-item="overflow-all"></div>
														<hr class="display-none-tablet margin-bottom-xxs margin-top-xxs" />
														<h4 class="font-size-sm padding-left-xxs">Share via</h4>

													<a class="button button-clear button-sm button-block has-inner-focus text-decoration-none justify-content-flex-start share-facebook" data-bi-name="facebook" data-page-action-item="overflow-all">
															<span class="icon" aria-hidden="true">
																<span class="docon docon-facebook-share font-size-md color-primary"></span>
															</span>
															<span class="margin-left-xxs">Facebook</span>
														</a>
														<a class="button button-clear button-sm has-inner-focus button-block text-decoration-none justify-content-flex-start share-twitter" data-bi-name="twitter" data-page-action-item="overflow-all">
															<span class="icon" aria-hidden="true">
																<span class="docon docon-xlogo-share font-size-xxs"></span>
															</span>
															<span class="margin-left-xxs">x.com</span>
														</a>
														<a class="button button-clear button-sm has-inner-focus button-block text-decoration-none justify-content-flex-start share-linkedin" data-bi-name="linkedin" data-page-action-item="overflow-all">
															<span class="icon" aria-hidden="true">
																<span class="docon docon-linked-in-logo font-size-sm color-primary"></span>
															</span>
															<span class="margin-left-xxs">LinkedIn</span>
														</a>
														<a class="button button-clear button-sm button-block has-inner-focus text-decoration-none justify-content-flex-start margin-bottom-xxs share-email" data-bi-name="email" data-page-action-item="overflow-all">
															<span class="icon" aria-hidden="true">
																<span class="docon docon-mail-message font-size-sm color-primary"></span>
															</span>
															<span class="margin-left-xxs">Email</span>
														</a><hr />
													<button
														class="button button-block button-clear button-sm justify-content-flex-start has-inner-focus margin-top-xxs"
														title="Print"
														type="button"
														aria-label="Print"
														data-bi-name="print"
														data-page-action-item="overflow-all"
														data-popover-close
														data-print-page
														data-check-hidden="true">
														<span class="icon" aria-hidden="true">
															<span class="docon docon-print font-size-sm color-primary"></span>
														</span>
														<span class="margin-left-xxs">Print</span>
													</button>
											</div>
										</details>
										
									</div></div>
							</div>
							<!-- end article-header --><div>
								<button type="button" class="border contents-button button button-clear button-sm is-hidden-tablet has-inner-focus" data-bi-name="contents-expand" data-contents-button hidden>
									<span class="icon">
										<span class="docon docon-editor-list-bullet" aria-hidden="true"></span>
									</span><span class="contents-expand-title">Table of contents</span></button>
							</div><!-- end mobile-contents button  -->

							<div class="content "><h1 id="protecting-microsoft-365-from-on-premises-attacks">Protecting Microsoft 365 from on-premises attacks</h1><div class="display-flex justify-content-space-between align-items-center flex-wrap-wrap page-metadata-container">
										<div class="margin-right-xxs">
											<ul class="metadata page-metadata" data-bi-name="page info" lang="en-us" dir="ltr"><li>Article</li><li class="visibility-hidden-visual-diff"><time class="is-invisible" data-article-date aria-label="Article review date" datetime="2024-10-17T08:00:00Z" data-article-date-source="calculated">10/17/2024</time>
															</li><li class="contributors-holder display-none-print">
															<button aria-label="View all contributors" class="contributors-button link-button" data-bi-name="contributors" title="View all contributors">8 contributors</button>
														</li></ul>
										</div>
<div id="user-feedback" class="margin-block-xxs display-none-print" data-hide-on-archived>
	<button
		id="user-feedback-button"
		data-test-id="conceptual-feedback-button"
		class="button button-sm button-clear button-primary"
		type="button"
		data-bi-name="user-feedback-button"
		data-user-feedback-button
	>
		<span class="icon" aria-hidden="true">
			<span class="docon docon-like"></span>
		</span>
		<span>Feedback</span>
	</button>
</div></div><nav id="center-doc-outline" class="doc-outline is-hidden-desktop display-none-print margin-bottom-sm" data-bi-name="intopic toc" aria-label="In this article">
											<h2 id="ms--in-this-article" class="title is-6 margin-block-xs">In this article</h2>
										</nav><!-- <content> --><p>Many customers connect their private corporate networks to Microsoft 365 to benefit their users, devices, and applications. However, these private networks can be compromised in many well-documented ways. Microsoft 365 acts as a sort of nervous system for many organizations. It's critical to protect it from compromised on-premises infrastructure.</p>
<p>This article shows you how to configure your systems to help protect your Microsoft 365 cloud environment from on-premises compromise, including the following elements:</p>
<ul>
<li>Microsoft Entra tenant configuration settings</li>
<li>How Microsoft Entra tenants can be safely connected to on-premises systems</li>
<li>The tradeoffs required to operate your systems in ways that protect your cloud systems from on-premises compromise</li>
</ul>
<p>Microsoft strongly recommends that you implement this guidance.</p>
<h2 id="threat-sources-in-on-premises-environments">Threat sources in on-premises environments</h2>
<p>Your Microsoft 365 cloud environment benefits from an extensive monitoring and security infrastructure. Microsoft 365 uses machine learning and human intelligence to look across worldwide traffic. It can rapidly detect attacks and allow you to reconfigure nearly in real time.</p>
<p>Hybrid deployments can connect on-premises infrastructure to Microsoft 365. In such deployments, many organizations delegate trust to on-premises components for critical authentication and directory object state management decisions. If the on-premises environment is compromised, these trust relationships become an attacker's opportunities to compromise your Microsoft 365 environment.</p>
<p>The two primary threat vectors are <em>federation trust relationships</em> and <em>account synchronization.</em> Both vectors can grant an attacker administrative access to your cloud.</p>
<ul>
<li><p><strong>Federated trust relationships</strong>, such as Security Assertions Markup Language (SAML) authentication, are used to authenticate to Microsoft 365 through your on-premises identity infrastructure. If a SAML token-signing certificate is compromised, federation allows anyone who has that certificate to impersonate any user in your cloud.</p>
<p>We recommend that you disable federation trust relationships for authentication to Microsoft 365 when possible.</p>
</li>
<li><p><strong>Account synchronization</strong> can be used to modify privileged users, including their credentials, or groups that have administrative privileges in Microsoft 365.</p>
<p>We recommend that you ensure that synchronized objects hold no privileges beyond a user in Microsoft 365. You can control privileges either directly or through inclusion in trusted roles or groups. Ensure these objects have no direct or nested assignment in trusted cloud roles or groups.</p>
</li>
</ul>
<h2 id="protecting-microsoft-365-from-on-premises-compromise">Protecting Microsoft 365 from on-premises compromise</h2>
<p>To address the threats described above, we recommend you adhere to the principles illustrated in the following diagram:</p>
<p><img src="media/protect-m365/protect-m365-principles.png" alt="Reference architecture for protecting Microsoft 365, as described in the following list." data-linktype="relative-path"></p>
<ol>
<li><p><strong>Fully isolate your Microsoft 365 administrator accounts.</strong> They should be:</p>
<ul>
<li>Mastered in Microsoft Entra ID.</li>
<li>Authenticated by using multifactor authentication.</li>
<li>Secured by Microsoft Entra Conditional Access.</li>
<li>Accessed only by using Azure-managed workstations.</li>
</ul>
<p>These administrator accounts are restricted-use accounts. No on-premises accounts should have administrative privileges in Microsoft 365.</p>
<p>For more information, see <a href="/en-us/microsoft-365/admin/add-users/about-admin-roles" data-linktype="absolute-path">About admin roles</a>. Also, see <a href="../identity/role-based-access-control/m365-workload-docs" data-linktype="relative-path">Roles for Microsoft 365 in Microsoft Entra ID</a>.</p>
</li>
<li><p><strong>Manage devices from Microsoft 365.</strong> Use Microsoft Entra join and cloud-based mobile device management (MDM) to eliminate dependencies on your on-premises device management infrastructure. These dependencies can compromise device and security controls.</p>
</li>
<li><p><strong>Ensure no on-premises account has elevated privileges to Microsoft 365.</strong> Some accounts access on-premises applications that require NTLM, LDAP, or Kerberos authentication. These accounts must be in the organization's on-premises identity infrastructure. Ensure that these accounts, including service accounts, aren't included in privileged cloud roles or groups. Also ensure that changes to these accounts can't affect the integrity of your cloud environment. Privileged on-premises software must not be capable of affecting Microsoft 365 privileged accounts or roles.</p>
</li>
<li><p><strong>Use Microsoft Entra cloud authentication to eliminate dependencies on your on-premises credentials.</strong> Always use strong authentication, such as Windows Hello, FIDO, Microsoft Authenticator, or Microsoft Entra multifactor authentication.</p>
</li>
</ol>
<h2 id="specific-security-recommendations">Specific security recommendations</h2>
<p>The following sections provide guidance about how to implement the principles described above.</p>
<h3 id="isolate-privileged-identities">Isolate privileged identities</h3>
<p>In Microsoft Entra ID, users who have privileged roles, such as administrators, are the root of trust to build and manage the rest of the environment. Implement the following practices to minimize the effects of a compromise.</p>
<ul>
<li><p>Use cloud-only accounts for Microsoft Entra ID and Microsoft 365 privileged roles.</p>
<p>For each role with high privileges, you should do the following:</p>
<ul>
<li>Review the users that have <code>onPremisesImmutableId</code> and <code>onPremisesSyncEnabled</code> set. See Microsoft Graph API <a href="/en-us/graph/api/resources/user" data-linktype="absolute-path">user resource type</a>.</li>
<li>Create cloud-only user accounts for those individuals and remove their hybrid identity from privileged roles.</li>
</ul>
</li>
<li><p>Deploy privileged access devices for privileged access to manage Microsoft 365 and Microsoft Entra ID. See <a href="/en-us/security/privileged-access-workstations/privileged-access-devices#device-roles-and-profiles" data-linktype="absolute-path">Device roles and profiles</a>.</p>
<p>Deploy Microsoft Entra Privileged Identity Management (PIM) for just-in-time access to all human accounts that have privileged roles. Require strong authentication to activate roles. See <a href="../id-governance/privileged-identity-management/pim-configure" data-linktype="relative-path">What is Microsoft Entra Privileged Identity Management</a>.</p>
</li>
<li><p>Provide administrative roles that allow the least privilege necessary to do required tasks. See <a href="../identity/role-based-access-control/delegate-by-task" data-linktype="relative-path">Least privileged roles by task in Microsoft Entra ID</a>.</p>
</li>
<li><p>To enable a rich role assignment experience that includes delegation and multiple roles at the same time, consider using Microsoft Entra security groups or Microsoft 365 Groups. These groups are collectively called <em>cloud groups</em>.</p>
<p>Also, enable role-based access control. See <a href="../identity/role-based-access-control/groups-assign-role" data-linktype="relative-path">Assign Microsoft Entra roles to groups</a>. You can use administrative units to restrict the scope of roles to a portion of the organization. See <a href="../identity/role-based-access-control/administrative-units" data-linktype="relative-path">Administrative units in Microsoft Entra ID</a>.</p>
</li>
<li><p>Deploy emergency access accounts. Do <em>not</em> use on-premises password vaults to store credentials. See <a href="../identity/role-based-access-control/security-emergency-access" data-linktype="relative-path">Manage emergency access accounts in Microsoft Entra ID</a>.</p>
</li>
</ul>
<p>For more information, see <a href="/en-us/security/privileged-access-workstations/overview" data-linktype="absolute-path">Securing privileged access</a>. Also, see <a href="../identity/role-based-access-control/security-planning" data-linktype="relative-path">Secure access practices for administrators in Microsoft Entra ID</a>.</p>
<h3 id="use-cloud-authentication">Use cloud authentication</h3>
<p>Credentials are a primary attack vector. Implement the following practices to make credentials more secure:</p>
<ul>
<li><p><strong>Deploy passwordless authentication</strong>. Reduce the use of passwords as much as possible by deploying passwordless credentials. These credentials are managed and validated natively in the cloud. For more information, see <a href="../identity/authentication/howto-authentication-passwordless-deployment" data-linktype="relative-path">Plan a passwordless authentication deployment in Microsoft Entra ID</a>.</p>
<p>Choose from these authentication methods:</p>
<ul>
<li><a href="/en-us/windows/security/identity-protection/hello-for-business/passwordless-strategy" data-linktype="absolute-path">Windows Hello for business</a></li>
<li><a href="../identity/authentication/howto-authentication-passwordless-phone" data-linktype="relative-path">The Microsoft Authenticator app</a></li>
<li><a href="../identity/authentication/howto-authentication-passwordless-security-key-windows" data-linktype="relative-path">FIDO2 security keys</a></li>
</ul>
</li>
<li><p><strong>Deploy multifactor authentication</strong>. For more information, see <a href="../identity/authentication/howto-mfa-getstarted" data-linktype="relative-path">Plan a Microsoft Entra multifactor authentication deployment</a>.</p>
<p>Provision multiple strong credentials by using Microsoft Entra multifactor authentication. That way, access to cloud resources requires a Microsoft Entra ID managed credential in addition to an on-premises password. For more information, see <a href="resilience-in-credentials" data-linktype="relative-path">Build resilience with credential management</a> and <a href="resilience-overview" data-linktype="relative-path">Create a resilient access control management strategy by using Microsoft Entra ID</a>.</p>
</li>
</ul>
<h3 id="limitations-and-tradeoffs">Limitations and tradeoffs</h3>
<p>Hybrid account password management requires hybrid components such as password protection agents and password writeback agents. If your on-premises infrastructure is compromised, attackers can control the machines on which these agents reside. This vulnerability won't compromise your cloud infrastructure. But your cloud accounts won't protect these components from on-premises compromise.</p>
<p>On-premises accounts synced from Active Directory are marked to never expire in Microsoft Entra ID. This setting is usually mitigated by on-premises Active Directory password settings. If your instance of Active Directory is compromised and synchronization is disabled, set the <a href="../identity/hybrid/connect/how-to-connect-password-hash-synchronization" data-linktype="relative-path">EnforceCloudPasswordPolicyForPasswordSyncedUsers</a> option to force password changes.</p>
<h2 id="provision-user-access-from-the-cloud">Provision user access from the cloud</h2>
<p><em>Provisioning</em> refers to the creation of user accounts and groups in applications or identity providers.</p>
<p><img src="media/protect-m365/protect-m365-provision.png" alt="Diagram of provisioning architecture shows the interaction of Microsoft Entra ID with Cloud HR, Microsoft Entra B 2 B, Azure app provisioning, and group-based licensing." data-linktype="relative-path"></p>
<p>We recommend the following provisioning methods:</p>
<ul>
<li><p><strong>Provision from cloud HR apps to Microsoft Entra ID.</strong> This provisioning enables an on-premises compromise to be isolated. This isolation doesn't disrupt your joiner-mover-leaver cycle from your cloud HR apps to Microsoft Entra ID.</p>
</li>
<li><p><strong>Cloud applications.</strong> Where possible, deploy Microsoft Entra app provisioning as opposed to on-premises provisioning solutions. This method protects some of your software as a service (SaaS) apps from malicious hacker profiles in on-premises breaches. For more information, see <a href="../identity/app-provisioning/user-provisioning" data-linktype="relative-path">What is app provisioning in Microsoft Entra ID</a>.</p>
</li>
<li><p><strong>External identities.</strong> Use Microsoft Entra B2B collaboration to reduce the dependency on on-premises accounts for external collaboration with partners, customers, and suppliers. Carefully evaluate any direct federation with other identity providers. For more information, see <a href="../external-id/what-is-b2b" data-linktype="relative-path">B2B collaboration overview</a>.</p>
<p>We recommend limiting B2B guest accounts in the following ways:</p>
<ul>
<li>Limit guest access to browsing groups and other properties in the directory. Use the external collaboration settings to restrict guests' ability to read groups they're not members of.</li>
<li>Block access to the Azure portal. You can make rare necessary exceptions.  Create a Conditional Access policy that includes all guests and external users. Then implement a policy to block access. See <a href="../identity/conditional-access/concept-conditional-access-cloud-apps" data-linktype="relative-path">Conditional Access</a>.</li>
</ul>
</li>
<li><p><strong>Disconnected forests.</strong> Use Microsoft Entra cloud provisioning to connect to disconnected forests. This approach eliminates the need to establish cross-forest connectivity or trusts, which can broaden the effect of an on-premises breach. For more information, see <a href="../identity/hybrid/cloud-sync/what-is-cloud-sync" data-linktype="relative-path">What is Microsoft Entra Connect cloud sync</a>.</p>
</li>
</ul>
<h3 id="limitations-and-tradeoffs-1">Limitations and tradeoffs</h3>
<p>When used to provision hybrid accounts, the Microsoft Entra ID-from-cloud-HR system relies on on-premises synchronization to complete the data flow from Active Directory to Microsoft Entra ID. If synchronization is interrupted, new employee records won't be available in Microsoft Entra ID.</p>
<h2 id="use-cloud-groups-for-collaboration-and-access">Use cloud groups for collaboration and access</h2>
<p>Cloud groups allow you to decouple your collaboration and access from your on-premises infrastructure.</p>
<ul>
<li><strong>Collaboration</strong>. Use Microsoft 365 Groups and Microsoft Teams for modern collaboration. Decommission on-premises distribution lists, and <a href="/en-us/microsoft-365/admin/create-groups/office-365-groups" data-linktype="absolute-path">upgrade distribution lists to Microsoft 365 Groups in Outlook</a>.</li>
<li><strong>Access</strong>. Use Microsoft Entra security groups or Microsoft 365 Groups to authorize access to applications in Microsoft Entra ID.</li>
<li><strong>Office 365 licensing</strong>. Use group-based licensing to provision to Office 365 by using cloud-only groups. This method decouples control of group membership from on-premises infrastructure.</li>
</ul>
<p>Owners of groups that are used for access should be considered privileged identities to avoid membership takeover in an on-premises compromise. A takeover would include direct manipulation of group membership on-premises or manipulation of on-premises attributes that can affect dynamic membership groups in Microsoft 365.</p>
<h2 id="manage-devices-from-the-cloud">Manage devices from the cloud</h2>
<p>Use Microsoft Entra capabilities to securely manage devices.</p>
<p>Deploy Microsoft Entra joined Windows 10 workstations with mobile device management policies. Enable Windows Autopilot for a fully automated provisioning experience. See <a href="../identity/devices/device-join-plan" data-linktype="relative-path">Plan your Microsoft Entra join implementation</a> and <a href="/en-us/autopilot/windows-autopilot" data-linktype="absolute-path">Windows Autopilot</a>.</p>
<ul>
<li><strong>Use Windows 10 workstations</strong>.
<ul>
<li>Deprecate machines that run Windows 8.1 and earlier.</li>
<li>Don't deploy computers that have server operating systems as workstations.</li>
</ul>
</li>
<li><strong>Use Microsoft Intune as the authority for all device management workloads.</strong> See <a href="https://www.microsoft.com/security/business/endpoint-management/microsoft-intune" data-linktype="external">Microsoft Intune</a>.</li>
<li><strong>Deploy privileged access devices.</strong> For more information, see <a href="/en-us/security/privileged-access-workstations/privileged-access-devices#device-roles-and-profiles" data-linktype="absolute-path">Device roles and profiles</a>.</li>
</ul>
<h3 id="workloads-applications-and-resources">Workloads, applications, and resources</h3>
<ul>
<li><p><strong>On-premises single-sign-on (SSO) systems</strong></p>
<p>Deprecate any on-premises federation and web access management infrastructure. Configure applications to use Microsoft Entra ID.</p>
</li>
<li><p><strong>SaaS and line-of-business (LOB) applications that support modern authentication protocols</strong></p>
<p>Use Microsoft Entra ID for SSO. The more apps you configure to use Microsoft Entra ID for authentication, the less risk in an on-premises compromise. For more information, see <a href="../identity/enterprise-apps/what-is-single-sign-on" data-linktype="relative-path">What is single sign-on in Microsoft Entra ID</a>.</p>
</li>
<li><p><strong>Legacy applications</strong></p>
<p>You can enable authentication, authorization, and remote access to legacy applications that don't support modern authentication. Use <a href="/en-us/entra/identity/app-proxy" data-linktype="absolute-path">Microsoft Entra application proxy</a>. Or, enable them through a network or application delivery controller solution by using secure hybrid access partner integrations. See <a href="../identity/enterprise-apps/secure-hybrid-access" data-linktype="relative-path">Secure legacy apps with Microsoft Entra ID</a>.</p>
<p>Choose a VPN vendor that supports modern authentication. Integrate its authentication with Microsoft Entra ID. In an on-premises compromise, you can use Microsoft Entra ID to disable or block access by disabling the VPN.</p>
</li>
<li><p><strong>Application and workload servers</strong></p>
<p>Applications or resources that required servers can be migrated to Azure infrastructure as a service (IaaS). Use Microsoft Entra Domain Services to decouple trust and dependency on on-premises instances of Active Directory. To achieve this decoupling, make sure virtual networks used for Microsoft Entra Domain Services don't have a connection to corporate networks. See <a href="/en-us/entra/identity/domain-services/overview" data-linktype="absolute-path">Microsoft Entra Domain Services</a>.</p>
<p>Use credential tiering. Application servers are typically considered tier-1 assets. For more information, see <a href="/en-us/security/privileged-access-workstations/privileged-access-access-model#ADATM_BM" data-linktype="absolute-path">Enterprise access model</a>.</p>
</li>
</ul>
<h2 id="conditional-access-policies">Conditional Access policies</h2>
<p>Use Microsoft Entra Conditional Access to interpret signals and use them to make authentication decisions. For more information, see the <a href="../identity/conditional-access/plan-conditional-access" data-linktype="relative-path">Conditional Access deployment plan</a>.</p>
<ul>
<li><p>Use Conditional Access to block legacy authentication protocols whenever possible. Additionally, disable legacy authentication protocols at the application level by using an application-specific configuration. See <a href="../identity/conditional-access/policy-block-legacy-authentication" data-linktype="relative-path">Block legacy authentication</a>.</p>
<p>For more information, see <a href="auth-sync-overview#legacy-authentication-protocols" data-linktype="relative-path">Legacy authentication protocols</a>. Or see specific details for <a href="/en-us/exchange/clients-and-mobile-in-exchange-online/disable-basic-authentication-in-exchange-online#how-basic-authentication-works-in-exchange-online" data-linktype="absolute-path">Exchange Online</a> and <a href="/en-us/powershell/module/sharepoint-online/set-spotenant" data-linktype="absolute-path">SharePoint Online</a>.</p>
</li>
<li><p>Implement the recommended identity and device access configurations. See <a href="/en-us/microsoft-365/security/office-365-security/identity-access-policies" data-linktype="absolute-path">Common Zero Trust identity and device access policies</a>.</p>
</li>
<li><p>If you're using a version of Microsoft Entra ID that doesn't include Conditional Access, use <a href="../fundamentals/security-defaults" data-linktype="relative-path">Security defaults in Microsoft Entra ID</a>.</p>
<p>For more information about Microsoft Entra feature licensing, see the <a href="https://www.microsoft.com/security/business/identity-access-management/azure-ad-pricing" data-linktype="external">Microsoft Entra pricing guide</a>.</p>
</li>
</ul>
<h2 id="monitor">Monitor</h2>
<p>After you configure your environment to protect your Microsoft 365 from an on-premises compromise, proactively monitor the environment. For more information, see <a href="../identity/monitoring-health/overview-monitoring-health" data-linktype="relative-path">What is Microsoft Entra monitoring?</a></p>
<h3 id="scenarios-to-monitor">Scenarios to monitor</h3>
<p>Monitor the following key scenarios, in addition to any scenarios specific to your organization. For example, you should proactively monitor access to your business-critical applications and resources.</p>
<ul>
<li><p><strong>Suspicious activity</strong></p>
<p>Monitor all Microsoft Entra risk events for suspicious activity. See <a href="../id-protection/howto-identity-protection-investigate-risk" data-linktype="relative-path">How To: Investigate risk</a>. Microsoft Entra ID Protection is natively integrated with <a href="/en-us/defender-for-identity/what-is" data-linktype="absolute-path">Microsoft Defender for Identity</a>.</p>
<p>Define network named locations to avoid noisy detections on location-based signals. See <a href="../identity/conditional-access/concept-assignment-network" data-linktype="relative-path">Using the location condition in a Conditional Access policy</a>.</p>
</li>
<li><p><strong>User and Entity Behavioral Analytics (UEBA) alerts</strong></p>
<p>Use UEBA to get insights on anomaly detection. Microsoft Defender for Cloud Apps provides UEBA in the cloud. See <a href="/en-us/defender-cloud-apps/tutorial-ueba" data-linktype="absolute-path">Investigate risky users</a>.</p>
<p>You can integrate on-premises UEBA from Azure Advanced Threat Protection (ATP). Microsoft Defender for Cloud Apps reads signals from Microsoft Entra ID Protection. See <a href="/en-us/defender-for-identity/directory-service-accounts" data-linktype="absolute-path">Connect to your Active Directory Forest</a>.</p>
</li>
<li><p><strong>Emergency access accounts activity</strong></p>
<p>Monitor any access that uses emergency access accounts. See <a href="../identity/role-based-access-control/security-emergency-access" data-linktype="relative-path">Manage emergency access accounts in Microsoft Entra ID</a>. Create alerts for investigations. This monitoring must include the following actions:</p>
<ul>
<li>Sign-ins</li>
<li>Credential management</li>
<li>Any updates on group memberships</li>
<li>Application assignments</li>
</ul>
</li>
<li><p><strong>Privileged role activity</strong></p>
<p>Configure and review security alerts generated by Microsoft Entra Privileged Identity Management (PIM). Monitor direct assignment of privileged roles outside PIM by generating alerts whenever a user is assigned directly. See <a href="../id-governance/privileged-identity-management/pim-how-to-configure-security-alerts?tabs=new#security-alerts" data-linktype="relative-path">Security alerts</a>.</p>
</li>
<li><p><strong>Microsoft Entra tenant-wide configurations</strong></p>
<p>Any change to tenant-wide configurations should generate alerts in the system. These changes include but aren't limited to the following changes:</p>
<ul>
<li>Updated custom domains</li>
<li>Microsoft Entra B2B changes to allowlists and blocklists</li>
<li>Microsoft Entra B2B changes to allowed identity providers, such as SAML identity providers through direct federation or social sign-ins</li>
<li>Conditional Access or Risk policy changes</li>
</ul>
</li>
<li><p><strong>Application and service principal objects</strong></p>
<ul>
<li>New applications or service principals that might require Conditional Access policies</li>
<li>Credentials added to service principals</li>
<li>Application consent activity</li>
</ul>
</li>
<li><p><strong>Custom roles</strong></p>
<ul>
<li>Updates to the custom role definitions</li>
<li>Newly created custom roles</li>
</ul>
</li>
</ul>
<h3 id="log-management">Log management</h3>
<p>Define a log storage and retention strategy, design, and implementation to facilitate a consistent tool set. For example, you could consider security information and event management (SIEM) systems like Microsoft Sentinel, common queries, and investigation and forensics playbooks.</p>
<ul>
<li><p><strong>Microsoft Entra logs</strong>. Ingest generated logs and signals by consistently following best practices for settings such as diagnostics, log retention, and SIEM ingestion.</p>
<p>The log strategy must include the following Microsoft Entra logs:</p>
<ul>
<li>Sign-in activity</li>
<li>Audit logs</li>
<li>Risk events</li>
</ul>
<p>Microsoft Entra ID provides Azure Monitor integration for the sign-in activity log and audit logs. See <a href="../identity/monitoring-health/concept-log-monitoring-integration-options-considerations" data-linktype="relative-path">Microsoft Entra activity logs in Azure Monitor</a>.</p>
<p>Use the Microsoft Graph API to ingest risk events. See <a href="/en-us/graph/api/resources/identityprotection-overview" data-linktype="absolute-path">Use the Microsoft Graph ID Protection APIs</a>.</p>
<p>You can stream Microsoft Entra logs to Azure Monitor logs. See <a href="../identity/monitoring-health/howto-integrate-activity-logs-with-azure-monitor-logs" data-linktype="relative-path">Integrate Microsoft Entra logs with Azure Monitor logs</a>.</p>
</li>
<li><p><strong>Hybrid infrastructure operating system security logs</strong>. All hybrid identity infrastructure operating system logs should be archived and carefully monitored as a tier-0 system, because of the surface-area implications. Include the following elements:</p>
<ul>
<li><p>Application Proxy agents</p>
</li>
<li><p>Password writeback agents</p>
</li>
<li><p>Password Protection Gateway machines</p>
</li>
<li><p>Network policy servers (NPSs) that have the Microsoft Entra multifactor authentication RADIUS extension</p>
</li>
<li><p>Microsoft Entra Connect</p>
<p>You must deploy Microsoft Entra Connect Health to monitor identity synchronization. See <a href="../identity/hybrid/connect/whatis-azure-ad-connect" data-linktype="relative-path">What is Microsoft Entra Connect</a>.</p>
</li>
</ul>
</li>
</ul>
<h2 id="next-steps">Next steps</h2>
<ul>
<li><a href="resilience-overview" data-linktype="relative-path">Build resilience into identity and access management by using Microsoft Entra ID</a></li>
<li><a href="secure-external-access-resources" data-linktype="relative-path">Secure external access to resources</a></li>
<li><a href="../fundamentals/five-steps-to-full-application-integration" data-linktype="relative-path">Integrate all your apps with Microsoft Entra ID</a></li>
</ul>
</div><div id="ms--inline-notifications" class="margin-block-xs" data-bi-name="inline-notification"></div><div id="assertive-live-region" role="alert" aria-live="assertive" class="visually-hidden" aria-relevant="additions" aria-atomic="true"></div>
							<div id="polite-live-region" role="status" aria-live="polite" class="visually-hidden" aria-relevant="additions" aria-atomic="true"></div>
							<!-- </content> -->

						</main><!-- recommendations section --><!-- end recommendations section -->

						<!-- feedback section --><section id="site-user-feedback-footer" class="font-size-sm margin-top-md" data-test-id="site-user-feedback-footer" data-bi-name="site-feedback-section">
	<hr class="hr" />
	<h2 id="feedback" class="title is-3">Feedback</h2>
	<div class="display-flex flex-wrap-wrap align-items-center">
		<p class="font-weight-semibold margin-xxs margin-left-none">Was this page helpful?</p>
		<div class="buttons">
			<button
				class="thumb-rating-button like button button-primary button-sm"
				data-test-id="footer-rating-yes"
				data-binary-rating-response="rating-yes"
				type="button"
				title="This article is helpful"
				data-bi-name="button-rating-yes"
				aria-pressed="false"
			>
				<span class="icon" aria-hidden="true">
					<span class="docon docon-like"></span>
				</span>
				<span>Yes</span>
			</button>
			<button
				class="thumb-rating-button dislike button button-primary button-sm"
				data-test-id="footer-rating-no"
				data-binary-rating-response="rating-no"
				type="button"
				title="This article is not helpful"
				data-bi-name="button-rating-no"
				aria-pressed="false"
			>
				<span class="icon" aria-hidden="true">
					<span class="docon docon-dislike"></span>
				</span>
				<span>No</span>
			</button>
		</div>
	</div><div class="display-flex flex-wrap-wrap margin-top-xxs"><div>
			<a
				data-bi-name="provide-feedback-cta"
				class="has-external-link-indicator"
				href="https://feedback.azure.com/d365community/forum/79b1327d-d925-ec11-b6e6-000d3a4f06a4"
				data-bi-name="product-feedback"
			>
				<span>Provide product feedback</span>
			</a></div></div>

</section><!-- end feedback section -->

						<!-- feedback report section --><!-- end feedback report section --><aside
								id="ms--additional-resources-mobile"
								aria-label="Additional resources"
								class="display-none-desktop display-none-print"
							>
								<hr class="hr" hidden />
								<h2 id="ms--additional-resources-mobile-heading" class="title is-3" hidden>Additional resources</h2>
								<section id="right-rail-recommendations-mobile" data-bi-name="recommendations" hidden></section>
								<section id="right-rail-training-mobile" data-bi-name="learning-resources-card" hidden></section>
								<section id="right-rail-events-mobile" data-bi-name="events-card" hidden></section>
								<section id="right-rail-qna-mobile" data-bi-name="qna-link-card" hidden></section>
							</aside><div class="border-top is-visible-interactive has-default-focus margin-top-sm "><footer id="footer-interactive" data-bi-name="footer" class="footer-layout"><div class="display-flex gap-xs flex-wrap-wrap is-full-height padding-right-lg-desktop"><a
				data-mscc-ic="false"
				class="locale-selector-link button button-sm button-clear flex-shrink-0"
				href="#"
				data-bi-name="select-locale">
					<span class="icon" aria-hidden="true">
						<span class="docon docon-world"></span>
					</span>
					<span class="local-selector-link-text"></span></a><div class="ccpa-privacy-link" data-ccpa-privacy-link hidden>
<a
	href="https://aka.ms/yourcaliforniaprivacychoices"
	class="button button-sm button-clear flex-shrink-0"
	data-mscc-ic="false"
	data-bi-name="your-privacy-choices"
>
	<svg
		role="img"
		aria-label="California Consumer Privacy Act (CCPA) Opt-Out Icon"
		xmlns="http://www.w3.org/2000/svg"
		viewBox="0 0 30 14"
		xml:space="preserve"
		height="16"
		width="43"
		focusable="false"
	>
		<title>California Consumer Privacy Act (CCPA) Opt-Out Icon</title>
		<path d="M7.4 12.8h6.8l3.1-11.6H7.4C4.2 1.2 1.6 3.8 1.6 7s2.6 5.8 5.8 5.8z" style="fill-rule:evenodd;clip-rule:evenodd;fill:#fff"></path>
		<path d="M22.6 0H7.4c-3.9 0-7 3.1-7 7s3.1 7 7 7h15.2c3.9 0 7-3.1 7-7s-3.2-7-7-7zm-21 7c0-3.2 2.6-5.8 5.8-5.8h9.9l-3.1 11.6H7.4c-3.2 0-5.8-2.6-5.8-5.8z" style="fill-rule:evenodd;clip-rule:evenodd;fill:#06f"></path>
		<path d="M24.6 4c.2.2.2.6 0 .8L22.5 7l2.2 2.2c.2.2.2.6 0 .8-.2.2-.6.2-.8 0l-2.2-2.2-2.2 2.2c-.2.2-.6.2-.8 0-.2-.2-.2-.6 0-.8L20.8 7l-2.2-2.2c-.2-.2-.2-.6 0-.8.2-.2.6-.2.8 0l2.2 2.2L23.8 4c.2-.2.6-.2.8 0z" style="fill:#fff"></path>
		<path d="M12.7 4.1c.2.2.3.6.1.8L8.6 9.8c-.1.1-.2.2-.3.2-.2.1-.5.1-.7-.1L5.4 7.7c-.2-.2-.2-.6 0-.8.2-.2.6-.2.8 0L8 8.6l3.8-4.5c.2-.2.6-.2.9 0z" style="fill:#06f"></path>
	</svg>
	<span>Your Privacy Choices</span>
</a>

		</div>
		<div class="flex-shrink-0">
<div class="dropdown has-caret-up">
	<button class="dropdown-trigger button button-clear button-sm has-inner-focus theme-dropdown-trigger"
		aria-controls="theme-menu-interactive" aria-expanded="false" title="Theme" data-bi-name="theme">
		<span class="icon">
			<span class="docon docon-sun" aria-hidden="true"></span>
		</span>
		<span>Theme</span>
		<span class="icon expanded-indicator" aria-hidden="true">
			<span class="docon docon-chevron-down-light"></span>
		</span>
	</button>
	<div class="dropdown-menu" id="theme-menu-interactive" role="menu">
		<ul class="theme-selector padding-xxs" role="none">
			<li class="theme display-block" role="menuitem">
				<button class="button button-clear button-sm theme-control button-block justify-content-flex-start"
					data-theme-to="light">
					<span class="theme-light margin-right-xxs">
						<span
							class="theme-selector-icon border display-inline-block has-body-background"
							aria-hidden="true">
							<svg class="svg" xmlns="http://www.w3.org/2000/svg"
								viewBox="0 0 22 14">
								<rect width="22" height="14" class="has-fill-body-background" />
								<rect x="5" y="5" width="12" height="4" class="has-fill-secondary" />
								<rect x="5" y="2" width="2" height="1" class="has-fill-secondary" />
								<rect x="8" y="2" width="2" height="1" class="has-fill-secondary" />
								<rect x="11" y="2" width="3" height="1" class="has-fill-secondary" />
								<rect x="1" y="1" width="2" height="2" class="has-fill-secondary" />
								<rect x="5" y="10" width="7" height="2" rx="0.3" class="has-fill-primary" />
								<rect x="19" y="1" width="2" height="2" rx="1" class="has-fill-secondary" />
							</svg>
						</span>
					</span>
					<span>Light</span>
				</button>
			</li>
			<li class="theme display-block" role="menuitem">
				<button class="button button-clear button-sm theme-control button-block justify-content-flex-start"
					data-theme-to="dark">
					<span class="theme-dark margin-right-xxs">
						<span
							class="border theme-selector-icon display-inline-block has-body-background"
							aria-hidden="true">
							<svg class="svg" xmlns="http://www.w3.org/2000/svg"
								viewBox="0 0 22 14">
								<rect width="22" height="14" class="has-fill-body-background" />
								<rect x="5" y="5" width="12" height="4" class="has-fill-secondary" />
								<rect x="5" y="2" width="2" height="1" class="has-fill-secondary" />
								<rect x="8" y="2" width="2" height="1" class="has-fill-secondary" />
								<rect x="11" y="2" width="3" height="1" class="has-fill-secondary" />
								<rect x="1" y="1" width="2" height="2" class="has-fill-secondary" />
								<rect x="5" y="10" width="7" height="2" rx="0.3" class="has-fill-primary" />
								<rect x="19" y="1" width="2" height="2" rx="1" class="has-fill-secondary" />
							</svg>
						</span>
					</span>
					<span>Dark</span>
				</button>
			</li>
			<li class="theme display-block" role="menuitem">
				<button class="button button-clear button-sm theme-control button-block justify-content-flex-start"
					data-theme-to="high-contrast">
					<span class="theme-high-contrast margin-right-xxs">
						<span
							class="border theme-selector-icon display-inline-block has-body-background"
							aria-hidden="true">
							<svg class="svg" xmlns="http://www.w3.org/2000/svg"
								viewBox="0 0 22 14">
								<rect width="22" height="14" class="has-fill-body-background" />
								<rect x="5" y="5" width="12" height="4" class="has-fill-secondary" />
								<rect x="5" y="2" width="2" height="1" class="has-fill-secondary" />
								<rect x="8" y="2" width="2" height="1" class="has-fill-secondary" />
								<rect x="11" y="2" width="3" height="1" class="has-fill-secondary" />
								<rect x="1" y="1" width="2" height="2" class="has-fill-secondary" />
								<rect x="5" y="10" width="7" height="2" rx="0.3" class="has-fill-primary" />
								<rect x="19" y="1" width="2" height="2" rx="1" class="has-fill-secondary" />
							</svg>
						</span>
					</span>
					<span>High contrast</span>
				</button>
			</li>
		</ul>
	</div>
</div>

		</div>
	</div>
	<ul class="links" data-bi-name="footerlinks">
		<li class="manage-cookies-holder" hidden></li><li><a class="external-link-indicator" data-mscc-ic="false" href="/en-us/previous-versions/" data-bi-name="archivelink">Previous Versions</a></li>
				<li><a class="external-link-indicator" data-mscc-ic="false" href="https://techcommunity.microsoft.com/t5/microsoft-learn-blog/bg-p/MicrosoftLearnBlog" data-bi-name="bloglink">Blog</a></li>
				<li><a class="external-link-indicator" data-mscc-ic="false" href="/en-us/contribute/" data-bi-name="contributorGuide">Contribute</a></li><li><a class="external-link-indicator" data-mscc-ic="false" href="https://go.microsoft.com/fwlink/?LinkId=521839" data-bi-name="privacy">Privacy</a></li><li><a class="external-link-indicator" data-mscc-ic="false" href="/en-us/legal/termsofuse" data-bi-name="termsofuse">Terms of Use</a></li><li><a class="external-link-indicator" data-mscc-ic="false" href="https://www.microsoft.com/legal/intellectualproperty/Trademarks/" data-bi-name="trademarks">Trademarks</a></li><li>&copy; Microsoft 2024</li>
	</ul>
</footer></div></div><div
							id="ms--additional-resources"
							class="right-container column is-4-desktop display-none display-block-desktop"
							data-bi-name="pageactions"
							role="complementary"
							aria-label="Additional resources"
						>
							<div id="affixed-right-container" class="margin-top-sm-tablet" data-bi-name="right-column">
								<h2 id="ms--additional-resources-heading" class="title is-6 margin-top-md" hidden>Additional resources</h2>
								<section id="right-rail-events" data-bi-name="events-card" hidden></section>
								<section id="right-rail-training" data-bi-name="learning-resources-card" hidden></section>
								<section id="right-rail-recommendations" data-bi-name="recommendations" hidden></section>
								<nav id="side-doc-outline" class="doc-outline" data-bi-name="intopic toc" aria-label="In this article">
									<h3>In this article</h3>
								</nav>
								<section id="right-rail-qna" class="margin-top-xxs" data-bi-name="qna-link-card" hidden></section>
							</div>
						</div></div>
				<!--end of div.columns -->

			</section>
			<!--end of .primary-holder -->

			<!-- interactive container -->
			<aside id="interactive-container" class="interactive-container is-visible-interactive column has-body-background-dark ">
			</aside>
			<!-- end of interactive container -->
		</div>

	</div>
	<!--end of .mainContainer -->

	<section class="border-top has-default-focus is-hidden-interactive margin-top-sm "><footer id="footer" data-bi-name="footer" class="footer-layout uhf-container has-padding" role="contentinfo"><div class="display-flex gap-xs flex-wrap-wrap is-full-height padding-right-lg-desktop"><a
				data-mscc-ic="false"
				class="locale-selector-link button button-sm button-clear flex-shrink-0"
				href="#"
				data-bi-name="select-locale">
					<span class="icon" aria-hidden="true">
						<span class="docon docon-world"></span>
					</span>
					<span class="local-selector-link-text"></span></a><div class="ccpa-privacy-link" data-ccpa-privacy-link hidden>
<a
	href="https://aka.ms/yourcaliforniaprivacychoices"
	class="button button-sm button-clear flex-shrink-0"
	data-mscc-ic="false"
	data-bi-name="your-privacy-choices"
>
	<svg
		role="img"
		aria-label="California Consumer Privacy Act (CCPA) Opt-Out Icon"
		xmlns="http://www.w3.org/2000/svg"
		viewBox="0 0 30 14"
		xml:space="preserve"
		height="16"
		width="43"
		focusable="false"
	>
		<title>California Consumer Privacy Act (CCPA) Opt-Out Icon</title>
		<path d="M7.4 12.8h6.8l3.1-11.6H7.4C4.2 1.2 1.6 3.8 1.6 7s2.6 5.8 5.8 5.8z" style="fill-rule:evenodd;clip-rule:evenodd;fill:#fff"></path>
		<path d="M22.6 0H7.4c-3.9 0-7 3.1-7 7s3.1 7 7 7h15.2c3.9 0 7-3.1 7-7s-3.2-7-7-7zm-21 7c0-3.2 2.6-5.8 5.8-5.8h9.9l-3.1 11.6H7.4c-3.2 0-5.8-2.6-5.8-5.8z" style="fill-rule:evenodd;clip-rule:evenodd;fill:#06f"></path>
		<path d="M24.6 4c.2.2.2.6 0 .8L22.5 7l2.2 2.2c.2.2.2.6 0 .8-.2.2-.6.2-.8 0l-2.2-2.2-2.2 2.2c-.2.2-.6.2-.8 0-.2-.2-.2-.6 0-.8L20.8 7l-2.2-2.2c-.2-.2-.2-.6 0-.8.2-.2.6-.2.8 0l2.2 2.2L23.8 4c.2-.2.6-.2.8 0z" style="fill:#fff"></path>
		<path d="M12.7 4.1c.2.2.3.6.1.8L8.6 9.8c-.1.1-.2.2-.3.2-.2.1-.5.1-.7-.1L5.4 7.7c-.2-.2-.2-.6 0-.8.2-.2.6-.2.8 0L8 8.6l3.8-4.5c.2-.2.6-.2.9 0z" style="fill:#06f"></path>
	</svg>
	<span>Your Privacy Choices</span>
</a>

		</div>
		<div class="flex-shrink-0">
<div class="dropdown has-caret-up">
	<button class="dropdown-trigger button button-clear button-sm has-inner-focus theme-dropdown-trigger"
		aria-controls="theme-menu" aria-expanded="false" title="Theme" data-bi-name="theme">
		<span class="icon">
			<span class="docon docon-sun" aria-hidden="true"></span>
		</span>
		<span>Theme</span>
		<span class="icon expanded-indicator" aria-hidden="true">
			<span class="docon docon-chevron-down-light"></span>
		</span>
	</button>
	<div class="dropdown-menu" id="theme-menu" role="menu">
		<ul class="theme-selector padding-xxs" role="none">
			<li class="theme display-block" role="menuitem">
				<button class="button button-clear button-sm theme-control button-block justify-content-flex-start"
					data-theme-to="light">
					<span class="theme-light margin-right-xxs">
						<span
							class="theme-selector-icon border display-inline-block has-body-background"
							aria-hidden="true">
							<svg class="svg" xmlns="http://www.w3.org/2000/svg"
								viewBox="0 0 22 14">
								<rect width="22" height="14" class="has-fill-body-background" />
								<rect x="5" y="5" width="12" height="4" class="has-fill-secondary" />
								<rect x="5" y="2" width="2" height="1" class="has-fill-secondary" />
								<rect x="8" y="2" width="2" height="1" class="has-fill-secondary" />
								<rect x="11" y="2" width="3" height="1" class="has-fill-secondary" />
								<rect x="1" y="1" width="2" height="2" class="has-fill-secondary" />
								<rect x="5" y="10" width="7" height="2" rx="0.3" class="has-fill-primary" />
								<rect x="19" y="1" width="2" height="2" rx="1" class="has-fill-secondary" />
							</svg>
						</span>
					</span>
					<span>Light</span>
				</button>
			</li>
			<li class="theme display-block" role="menuitem">
				<button class="button button-clear button-sm theme-control button-block justify-content-flex-start"
					data-theme-to="dark">
					<span class="theme-dark margin-right-xxs">
						<span
							class="border theme-selector-icon display-inline-block has-body-background"
							aria-hidden="true">
							<svg class="svg" xmlns="http://www.w3.org/2000/svg"
								viewBox="0 0 22 14">
								<rect width="22" height="14" class="has-fill-body-background" />
								<rect x="5" y="5" width="12" height="4" class="has-fill-secondary" />
								<rect x="5" y="2" width="2" height="1" class="has-fill-secondary" />
								<rect x="8" y="2" width="2" height="1" class="has-fill-secondary" />
								<rect x="11" y="2" width="3" height="1" class="has-fill-secondary" />
								<rect x="1" y="1" width="2" height="2" class="has-fill-secondary" />
								<rect x="5" y="10" width="7" height="2" rx="0.3" class="has-fill-primary" />
								<rect x="19" y="1" width="2" height="2" rx="1" class="has-fill-secondary" />
							</svg>
						</span>
					</span>
					<span>Dark</span>
				</button>
			</li>
			<li class="theme display-block" role="menuitem">
				<button class="button button-clear button-sm theme-control button-block justify-content-flex-start"
					data-theme-to="high-contrast">
					<span class="theme-high-contrast margin-right-xxs">
						<span
							class="border theme-selector-icon display-inline-block has-body-background"
							aria-hidden="true">
							<svg class="svg" xmlns="http://www.w3.org/2000/svg"
								viewBox="0 0 22 14">
								<rect width="22" height="14" class="has-fill-body-background" />
								<rect x="5" y="5" width="12" height="4" class="has-fill-secondary" />
								<rect x="5" y="2" width="2" height="1" class="has-fill-secondary" />
								<rect x="8" y="2" width="2" height="1" class="has-fill-secondary" />
								<rect x="11" y="2" width="3" height="1" class="has-fill-secondary" />
								<rect x="1" y="1" width="2" height="2" class="has-fill-secondary" />
								<rect x="5" y="10" width="7" height="2" rx="0.3" class="has-fill-primary" />
								<rect x="19" y="1" width="2" height="2" rx="1" class="has-fill-secondary" />
							</svg>
						</span>
					</span>
					<span>High contrast</span>
				</button>
			</li>
		</ul>
	</div>
</div>

		</div>
	</div>
	<ul class="links" data-bi-name="footerlinks">
		<li class="manage-cookies-holder" hidden></li><li><a class="external-link-indicator" data-mscc-ic="false" href="/en-us/previous-versions/" data-bi-name="archivelink">Previous Versions</a></li>
				<li><a class="external-link-indicator" data-mscc-ic="false" href="https://techcommunity.microsoft.com/t5/microsoft-learn-blog/bg-p/MicrosoftLearnBlog" data-bi-name="bloglink">Blog</a></li>
				<li><a class="external-link-indicator" data-mscc-ic="false" href="/en-us/contribute/" data-bi-name="contributorGuide">Contribute</a></li><li><a class="external-link-indicator" data-mscc-ic="false" href="https://go.microsoft.com/fwlink/?LinkId=521839" data-bi-name="privacy">Privacy</a></li><li><a class="external-link-indicator" data-mscc-ic="false" href="/en-us/legal/termsofuse" data-bi-name="termsofuse">Terms of Use</a></li><li><a class="external-link-indicator" data-mscc-ic="false" href="https://www.microsoft.com/legal/intellectualproperty/Trademarks/" data-bi-name="trademarks">Trademarks</a></li><li>&copy; Microsoft 2024</li>
	</ul>
</footer>

	</section>

	<div id="action-panel" role="region" aria-label="Action Panel" class="action-panel has-default-focus" tabindex="-1"></div>
</body>
</html>