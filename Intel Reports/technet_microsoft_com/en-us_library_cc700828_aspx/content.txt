<!DOCTYPE html><html
	class="hasSidebar hasPageActions hasBreadcrumb conceptual has-default-focus theme-light"
	lang="en-us"
	dir="ltr"
	data-authenticated="false"
	data-auth-status-determined="false"
	data-target="docs"
	x-ms-format-detection="none">

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta property="og:title" content="Perimeter Firewall Design" />
	<meta property="og:type" content="website" />
	<meta property="og:url" content="https://learn.microsoft.com/en-us/previous-versions/tn-archive/cc700828(v=technet.10)" /><meta property="og:image" content="https://learn.microsoft.com/en-us/media/open-graph-image.png" />

	<meta property="og:image:alt" content="Microsoft Learn" />

	<meta name="twitter:card" content="summary_large_image" />

	<meta name="twitter:site" content="@MicrosoftLearn" />

	<meta name="color-scheme" content="light dark"><meta name="author" content="Archiveddocs" />
<meta name="breadcrumb_path" content="/previous-versions/tn-archive/breadcrumb/toc.json" />
<meta name="depot_name" content="MSDN.tn-archive-archive" />
<meta name="document_id" content="90df7f62-89e0-4baa-5c36-c31226910741" />
<meta name="document_version_independent_id" content="90df7f62-89e0-4baa-5c36-c31226910741" />
<meta name="feedback_system" content="None" />
<meta name="git_commit_id" content="6970971cdd84f8bcd13f785b9d86d99e746f6bab" />
<meta name="gitcommit" content="https://docs-archive.visualstudio.com/DefaultCollection/docs-archive-project/_git/tn-archive-docs-archive-pr/commit/6970971cdd84f8bcd13f785b9d86d99e746f6bab?path=/tn-archive/cc700828(v=technet.10).md&amp;_a=contents" />
<meta name="is_archived" content="true" />
<meta name="locale" content="en-us" />
<meta name="ms.author" content="Archiveddocs" />
<meta name="ms.date" content="06/29/2009" />
<meta name="ms.prod" content="tn-archive" />
<meta name="ms.topic" content="archived" />
<meta name="ms:assetid" content="8c22adfe-c457-4d5d-8d48-d42f6f6e424a" />
<meta name="ms:contentKeyID" content="16701060" />
<meta name="ms:mtpsurl" content="https://technet.microsoft.com/en-us/library/Cc700828(v=TechNet.10)" />
<meta name="mtps_version" content="v=TechNet.10" />
<meta name="original_content_git_url" content="https://docs-archive.visualstudio.com/DefaultCollection/docs-archive-project/_git/tn-archive-docs-archive-pr?path=/tn-archive/cc700828(v=technet.10).md&amp;version=GBlive&amp;_a=contents" />
<meta name="page_type" content="conceptual" />
<meta name="ROBOTS" content="NOINDEX,NOFOLLOW" />
<meta name="schema" content="Conceptual" />
<meta name="site_name" content="Docs" />
<meta name="toc_rel" content="cc184906(v=technet.10)/toc.json" />
<meta name="TOCTitle" content="Perimeter Firewall Design" />
<meta name="uhfHeaderId" content="MSDocsHeader-Archive" />
<meta name="updated_at" content="2022-01-21 03:09 AM" />
<meta name="word_count" content="11285" />
<meta name="persistent_id" content="2381548a-3cb0-1b46-2961-72c8a7f494fe" />
	<meta name="github_feedback_content_git_url" content="https://docs-archive.visualstudio.com/DefaultCollection/docs-archive-project/_git/tn-archive-docs-archive-pr?path=/tn-archive/cc700828(v=technet.10).md&version=GBlive&_a=contents" /><link href="https://learn.microsoft.com/en-us/previous-versions/tn-archive/cc700828(v=technet.10)" rel="canonical"><title>Perimeter Firewall Design | Microsoft Learn</title><link rel="stylesheet" href="/static/assets/0.4.028546081/styles/site-ltr.css">

	<script id="msdocs-script">
	var msDocs = {environment: {
			supportLevel: 'production',
			accessLevel: 'online',
			reviewFeatures: false,
			systemContent: true,
			azurePortalHostname: 'portal.azure.com',
			legacyHosting: false,
			siteName: 'learn',
		},data: {
			timeOrigin: Date.now(),
			contentLocale: 'en-us',
			contentDir: 'ltr',
			userLocale: 'en-us',
			userDir: 'ltr',
			pageTemplate: 'Conceptual',
			brand: '',
			context: {},
			hasBinaryRating: false,
			feedbackHelpLinkType:'',
			feedbackHelpLinkUrl:'',
			standardFeedback: false,
			showFeedbackReport: false,
			enableTutorialFeedback: false,
			feedbackSystem: 'None',
			feedbackGitHubRepo: '',
			feedbackProductUrl: '',extendBreadcrumb: true,isEditDisplayable: false,
			hideViewSource: false,
			hasPageActions: true,
			hasPrintButton: true,
			hasBookmark: true,
			hasShare: true,
			isPermissioned: false,
			isPrivateUnauthorized: false,hasRecommendations: true,},
		functions:{}
	};
	</script><script src="https://wcpstatic.microsoft.com/mscc/lib/v2/wcp-consent.js"></script>
	<script src="https://js.monitor.azure.com/scripts/c/ms.jsll-4.min.js"></script><script src="/static/assets/0.4.028546081/global/deprecation.js"></script><script src="/static/assets/0.4.028546081/scripts/en-us/index-docs.js"></script></head>

<body lang="en-us" dir="ltr">
	<div class="header-holder has-default-focus">
		<a href="#main" class="skip-to-main-link has-outline-color-text visually-hidden-until-focused position-fixed has-inner-focus focus-visible top-0 left-0 right-0 padding-xs has-text-centered has-body-background" tabindex="1">Skip to main content</a><div hidden id="cookie-consent-holder" data-test-id="cookie-consent-container"></div>

		<div id="unsupported-browser" style="
			background-color: white;
			color: black;
			padding: 16px;
			border-bottom: 1px solid grey;"
			hidden
		>
			<div style="max-width: 800px; margin: 0 auto;">
				<p style="font-size: 24px">This browser is no longer supported.</p>
				<p style="font-size: 16px; margin-top: 16px;">Upgrade to Microsoft Edge to take advantage of the latest features, security updates, and technical support.</p>
				<div style="margin-top: 12px;">
					<a href="https://go.microsoft.com/fwlink/p/?LinkID=2092881 "
						style="
						background-color: #0078d4;
						border: 1px solid #0078d4;
						color: white;
						padding: 6px 12px;
						border-radius: 2px;
						display: inline-block;
						">Download Microsoft Edge</a>
					<a href="https://learn.microsoft.com/en-us/lifecycle/faq/internet-explorer-microsoft-edge"
						style="
							background-color: white;
							padding: 6px 12px;
							border: 1px solid #505050;
							color: #171717;
							border-radius: 2px;
							display: inline-block;
							">More info about Internet Explorer and Microsoft Edge</a>
				</div>
			</div>
		</div>
		<!-- liquid-tag banners global -->

		<!-- site header -->
		<header id="ms--site-header" data-test-id="site-header-wrapper" role="banner" itemscope="itemscope" itemtype="http://schema.org/Organization">
			<div id="ms--mobile-nav" class="site-header display-none-tablet padding-inline-none gap-none" data-bi-name="mobile-header" data-test-id="mobile-header"></div>
			<div id="ms--primary-nav" class="site-header display-none display-flex-tablet" data-bi-name="L1-header" data-test-id="primary-header"></div>
			<div id="ms--secondary-nav" class="site-header display-none display-flex-tablet" data-bi-name="L2-header" data-test-id="secondary-header"></div>
		</header><div id="content-header" class="content-header uhf-container has-padding has-default-focus border-bottom-none" data-bi-name="content-header">
				<div class="content-header-controls margin-xxs margin-inline-sm-tablet">
					<button type="button" class="contents-button button button-sm margin-right-xxs" data-bi-name="contents-expand" aria-haspopup="true" data-contents-button>
						<span class="icon"><span class="docon docon-menu" aria-hidden="true"></span></span>
						<span class="contents-expand-title">Table of contents</span>
					</button>
					<button type="button" class="ap-collapse-behavior ap-expanded button button-sm" data-bi-name="ap-collapse" aria-controls="action-panel">
						<span class="icon"><span class="docon docon-exit-mode" aria-hidden="true"></span></span>
						<span>Exit focus mode</span>
					</button>
				</div>
			</div><div id="disclaimer-holder" class="has-overflow-hidden has-default-focus">
			<!-- liquid-tag banners sectional -->
		</div>
	</div>

	<div class="mainContainer  uhf-container has-default-focus" data-bi-name="body">

		<div class="columns has-large-gaps is-gapless-mobile "><div id="left-container" class="left-container is-hidden-mobile column is-one-third-tablet is-one-quarter-desktop">
				<nav id="affixed-left-container" class="margin-top-sm-tablet position-sticky display-flex flex-direction-column" aria-label="Primary"></nav>
			</div><!-- .primary-holder -->
			<section class="primary-holder column is-two-thirds-tablet is-three-quarters-desktop">
				<!--div.columns -->
				<div class="columns is-gapless-mobile has-large-gaps "><div id="main-column" class="column  is-full is-8-desktop">

						<main id="main" class="" role="main" data-bi-name="content" lang="en-us" dir="ltr"><!-- article-header -->
							<div id="article-header" class="background-color-body margin-top-sm-tablet margin-bottom-xs display-none-print">
								<div class="display-flex align-items-center "><details id="article-header-breadcrumbs-overflow-popover" class="popover" data-for="article-header-breadcrumbs">
										<summary class="button button-clear button-primary button-sm inner-focus" aria-label="All breadcrumbs">
											<span class="icon">
												<span class="docon docon-more"></span>
											</span>
										</summary>
										<div id="article-header-breadcrumbs-overflow" class="popover-content padding-none">

										</div>
									</details>

									<bread-crumbs id="article-header-breadcrumbs" data-test-id="article-header-breadcrumbs" class="overflow-hidden flex-grow-1 margin-right-sm margin-right-md-tablet margin-right-lg-desktop margin-left-negative-xxs padding-left-xxs"></bread-crumbs><div id="article-header-page-actions"  class="opacity-none margin-left-auto display-flex flex-wrap-no-wrap align-items-stretch"><a
											id="lang-link-tablet"
											class="button button-primary button-clear button-sm display-none display-inline-flex-tablet"
											title="Read in English" data-bi-name="language-toggle"
											data-read-in-link
											hidden>
											<span class="icon margin-none" aria-hidden="true" data-read-in-link-icon>
												<span class="docon docon-locale-globe"></span>
											</span>
											<span class="is-visually-hidden" data-read-in-link-text>Read in English</span>
										</a><button
												type="button"
												class="collection button button-clear button-sm button-primary display-none display-inline-flex-tablet"
												data-list-type="collection"
												data-bi-name="collection"
												title="Add to collection">
												<span class="icon margin-none" aria-hidden="true">
													<span class="docon docon-circle-addition"></span>
												</span>
												<span class="collection-status is-visually-hidden">Save</span>
											</button>
										<details class="popover popover-right" id="article-header-page-actions-overflow">
											<summary class="justify-content-flex-start button button-clear button-sm button-primary" aria-label="More actions" title="More actions">
												<span class="icon" aria-hidden="true">
													<span class="docon docon-more-vertical"></span>
												</span>
											</summary>
											<div class="popover-content padding-xs"><button
														data-page-action-item="overflow-mobile"
														type="button"
														class="justify-content-flex-start button-block button-sm has-inner-focus button button-clear display-none-tablet"
														data-bi-name="contents-expand"
														data-contents-button
														data-popover-close>
														<span class="icon">
															<span class="docon docon-editor-list-bullet" aria-hidden="true"></span>
														</span><span class="contents-expand-title">Table of contents</span></button><a
													id="lang-link-overflow"
													class="justify-content-flex-start button-sm has-inner-focus button button-clear button-block display-none-tablet"
													title="Read in English" data-bi-name="language-toggle"
													data-page-action-item="overflow-mobile"
													data-check-hidden="true"
													data-read-in-link
													hidden
													>
													<span class="icon" aria-hidden="true" data-read-in-link-icon>
														<span class="docon docon-locale-globe"></span>
													</span>
													<span data-read-in-link-text>Read in English</span>
												</a><button
														type="button"
														class="collection justify-content-flex-start button button-clear button-sm has-inner-focus button-block display-none-tablet"
														data-list-type="collection"
														data-bi-name="collection"
														title="Save"
														data-page-action-item="overflow-mobile"
														data-check-hidden="true"
														data-popover-close>
														<span class="icon" aria-hidden="true">
															<span class="docon docon-circle-addition"></span>
														</span>
														<span class="collection-status">Save</span>
													</button>

			 										
													<button
													 	type="button"
														class="collection justify-content-flex-start button button-clear button-sm has-inner-focus button-block display-none-tablet"
														data-list-type="plan"
														data-bi-name="plan"
														title="Add to Plan"
														data-page-action-item="overflow-mobile"
														data-check-hidden="true"
														data-popover-close
														hidden>
														<span class="icon" aria-hidden="true">
															<span class="docon docon-circle-addition"></span>
														</span>
														<span class="plan-status">Add to Plan</span>
													</button><div aria-hidden="true" class="margin-none" data-page-action-item="overflow-all"></div>
														<hr class="display-none-tablet margin-bottom-xxs margin-top-xxs" />
														<h4 class="font-size-sm padding-left-xxs">Share via</h4>

													<a class="button button-clear button-sm button-block has-inner-focus text-decoration-none justify-content-flex-start share-facebook" data-bi-name="facebook" data-page-action-item="overflow-all">
															<span class="icon" aria-hidden="true">
																<span class="docon docon-facebook-share font-size-md color-primary"></span>
															</span>
															<span class="margin-left-xxs">Facebook</span>
														</a>
														<a class="button button-clear button-sm has-inner-focus button-block text-decoration-none justify-content-flex-start share-twitter" data-bi-name="twitter" data-page-action-item="overflow-all">
															<span class="icon" aria-hidden="true">
																<span class="docon docon-xlogo-share font-size-xxs"></span>
															</span>
															<span class="margin-left-xxs">x.com</span>
														</a>
														<a class="button button-clear button-sm has-inner-focus button-block text-decoration-none justify-content-flex-start share-linkedin" data-bi-name="linkedin" data-page-action-item="overflow-all">
															<span class="icon" aria-hidden="true">
																<span class="docon docon-linked-in-logo font-size-sm color-primary"></span>
															</span>
															<span class="margin-left-xxs">LinkedIn</span>
														</a>
														<a class="button button-clear button-sm button-block has-inner-focus text-decoration-none justify-content-flex-start margin-bottom-xxs share-email" data-bi-name="email" data-page-action-item="overflow-all">
															<span class="icon" aria-hidden="true">
																<span class="docon docon-mail-message font-size-sm color-primary"></span>
															</span>
															<span class="margin-left-xxs">Email</span>
														</a><hr />
													<button
														class="button button-block button-clear button-sm justify-content-flex-start has-inner-focus margin-top-xxs"
														title="Print"
														type="button"
														aria-label="Print"
														data-bi-name="print"
														data-page-action-item="overflow-all"
														data-popover-close
														data-print-page
														data-check-hidden="true">
														<span class="icon" aria-hidden="true">
															<span class="docon docon-print font-size-sm color-primary"></span>
														</span>
														<span class="margin-left-xxs">Print</span>
													</button>
											</div>
										</details>
										
									</div></div>
							</div>
							<!-- end article-header --><div>
								<button type="button" class="border contents-button button button-clear button-sm is-hidden-tablet has-inner-focus" data-bi-name="contents-expand" data-contents-button hidden>
									<span class="icon">
										<span class="docon docon-editor-list-bullet" aria-hidden="true"></span>
									</span><span class="contents-expand-title">Table of contents</span></button>
							</div><!-- end mobile-contents button  -->

							<div class="content "><h1 id="perimeter-firewall-design">Perimeter Firewall Design</h1><div class="display-flex justify-content-space-between align-items-center flex-wrap-wrap page-metadata-container">
										<div class="margin-right-xxs">
											<ul class="metadata page-metadata" data-bi-name="page info" lang="en-us" dir="ltr"><li>Article</li><li>
														<time class="is-invisible" data-article-date aria-label="Article review date" datetime="2009-06-29T00:00:00.000Z" data-article-date-source="ms.date">06/29/2009</time>
													</li></ul>
										</div></div><nav id="center-doc-outline" class="doc-outline is-hidden-desktop display-none-print margin-bottom-sm" data-bi-name="intopic toc" aria-label="In this article">
											<h2 id="ms--in-this-article" class="title is-6 margin-block-xs">In this article</h2>
										</nav><!-- <content> --><p>Updated : February 6, 2004</p>
<h5 id="on-this-page">On This Page</h5>
<p>In This Module<br>
Objectives<br>
Applies To<br>
How To Use This Module<br>
Design Guidelines<br>
System Attacks and Defense<br>
Device Definition<br>
Firewall Features<br>
Firewall Classes<br>
Class 1 - Personal Firewall<br>
Class 2 - Router Firewall<br>
Class 3 - Low-end Hardware Firewall<br>
Class 4 - High-end Hardware Firewall<br>
Class 5 - High-end Server Firewall<br>
Perimeter Firewall Usage<br>
Perimeter Firewall Rules<br>
Hardware Requirements<br>
Firewall Availability<br>
Security<br>
Scalability<br>
Performance<br>
Consolidation<br>
Standards and Guidelines<br>
Summary<br>
References</p>
<h3 id="in-this-module">In This Module</h3>
<p>This module helps you to select a suitable firewall product for your organization's perimeter network. It presents the different classes of available firewalls and highlights their significant features. It also gives you guidance in determining your own requirements and helps you to select the most appropriate product.</p>
<h3 id="objectives">Objectives</h3>
<p>Use this module to:</p>
<ul>
<li><p>Identify the features necessary in your perimeter firewall.</p>
</li>
<li><p>Classify firewall products.</p>
</li>
<li><p>Select the best firewall product for your perimeter firewall.</p>
</li>
</ul>
<h3 id="applies-to">Applies To</h3>
<p>This module applies to the following technologies:</p>
<ul>
<li>Ethernet/IP-based firewall products</li>
</ul>
<h3 id="how-to-use-this-module">How To Use This Module</h3>
<p>Before reading this module, you should have an understanding of the TCP/IP protocol, your own network architecture, and in particular the devices in your perimeter network. It would also be useful to find out what inbound traffic from the Internet can be considered valid and what is invalid.</p>
<p>The design guidelines presented in this module will help you select the features you need from your firewall, taking into account major considerations such as growth and cost. The module will also provide you with information on some of the most damaging intrusions so that you can determine which are most likely to occur in your environment and how intrusions can be prevented, not just by installing a firewall but, for example, by tightening up server configurations or discussing controls with your Internet Service Provider (ISP). This module also defines different classes of firewalls and using the design guidelines you should be able to select the most appropriate class of firewall to meet your requirements. From the knowledge provided in this module and the technical terminology, you should be able to discuss with firewall manufacturers the products they can provide and evaluate their suitability for your requirements.</p>
<h3 id="design-guidelines">Design Guidelines</h3>
<p>Network intrusions from both internal and external users occur with increasing frequency, and protection from these intrusions must be established. Although a firewall offers protection for your network, it also costs money and creates an impediment to traffic flow, so you should look for one that is as cost effective and efficient as possible.</p>
<h4 id="network-architecture">Network Architecture</h4>
<p>In an enterprise network architecture, there will generally be three zones:</p>
<ul>
<li><p>Border network</p>
<p>This network faces directly onto the Internet via a router which should provide an initial layer of protection, in the form of basic network traffic filtering. The router feeds data through to the perimeter network via a perimeter firewall.</p>
</li>
<li><p>Perimeter network</p>
<p>This network, often called the DMZ (demilitarized zone network) or edge network, links incoming users to the Web servers or other services. The Web servers then link to the internal networks via an internal firewall.</p>
</li>
<li><p>Internal Networks</p>
<p>The internal networks link the internal servers, such as SQL Server and the internal users.</p>
</li>
</ul>
<p>These networks are depicted in Figure 1.</p>
<p><a href="https://technet.microsoft.com/en-us/cc700828.networkcomponents-0-0_big(en-us,technet.10).gif" data-linktype="external"><img src="images/cc700828.networkcomponents-0-0(en-us,technet.10).gif" alt="Cc700828.networkcomponents-0-0(en-us,TechNet.10).gif" title="Cc700828.networkcomponents-0-0(en-us,TechNet.10).gif" data-linktype="relative-path"></a></p>
<p><strong>Figure 1.</strong> <strong>Enterprise</strong> <strong>Network Architecture</strong></p>
<h4 id="design-inputs">Design Inputs</h4>
<p>A firewall checks incoming IP packets and blocks those it believes are intrusive. Some blocking can be done by recognizing by default that certain packets are illegal, others by configuring the firewall to block them. The TCP/IP protocol was designed many years ago, without any concept of hacking or intrusion, and it has many weaknesses. For example, the ICMP protocol was designed as a signaling mechanism within TCP/IP, but this protocol is open to abuse and can lead to such problems as denial-of-service (DoS) attacks. A perimeter firewall can have a more restricted capability than an internal firewall, because incoming traffic is more limited since its legal destination is the Web server or other special services.</p>
<p>Many types of firewalls are available, differentiated partly by price, but also on features and performance. Generally, the more expensive the firewall, the more power and features it has. Later on this module, the firewalls are grouped into classes to differentiate them, but before selecting a firewall, you need to determine what your requirements are, taking the following considerations into account:</p>
<ul>
<li><p><strong>Budget</strong></p>
</li>
<li><p><strong>Existing facilities</strong></p>
</li>
<li><p><strong>Availability</strong></p>
</li>
<li><p><strong>Scalability</strong></p>
</li>
<li><p><strong>Features required</strong></p>
</li>
</ul>
<h5 id="budget">Budget</h5>
<p>What is the available budget? Every firewall in the environment should provide the highest possible level of service while remaining cost-effective, but be aware of the resultant damage to your business if the firewall is too restricted by cost. Consider the downtime costs in your organization if the service is suspended by a denial of service attack.</p>
<h5 id="existing-facilities">Existing Facilities</h5>
<p>Are there existing facilities that can be used to save costs? There may already be firewalls in the environment that can be reused and routers that can have a firewall feature set installed. Your ISP can often implement firewall restrictions on your link, such as <em>rate-limiting</em>, i.e. limiting the rate at which certain packets are sent to you in order to reduce distributed denial of service attacks, DDoS, when your network is bombarded simultaneously by many other computers. Ask your ISP if they perform filtering according to RFCs 1918 and 2827.</p>
<h5 id="availability">Availability</h5>
<p>Does the firewall need to be available at all times? If you are offering a public Web server facility when users may want to connect 24 hours a day, you need almost 100% uptime. With any firewall there is always a chance of failure, so you need to mitigate against that. The availability of a firewall can be improved by two methods:</p>
<ul>
<li><p>Redundant components</p>
<p>Duplicating those components more likely to fail, such as the power supply, improves the resilience of the firewall, as the first component can fail with no effect on operations. Low cost firewalls usually do not have any redundant options, and adding resilience to your firewall adds to the cost without increasing the processing power.</p>
</li>
<li><p>Duplicate devices</p>
<p>Duplicating the firewall device provides a totally resilient system, but again at a considerable cost, as it also requires totally duplicate network cabling and duplicate connectivity in the routers or switches to which the firewall connects. However, depending upon the type of firewall, it may also double the throughput to compensate. In theory, all firewalls from the smallest to the largest could be duplicated, but in practice you also need a software switchover mechanism which may not be present in the smaller firewalls.</p>
</li>
</ul>
<h5 id="scalability">Scalability</h5>
<p>What is the throughput requirement of the firewall? Throughput can be considered both in terms of bits per second and packets transferred per second. If it is a new venture, you may not know the throughput rates, and if the venture is successful, the throughput from the Internet could escalate rapidly. In order to handle the change, you need to select a firewall solution that can scale up as the throughput increases, either by adding more components to your firewall, or by installing another firewall in parallel.</p>
<h5 id="features">Features</h5>
<p>Which firewall features are required? Based on risk assessments conducted against the services provided in your organization, you can determine which firewall features are required to protect the assets that provide the services. If VPNs (Virtual Private Networks) are required, then this will affect the design.</p>
<h3 id="system-attacks-and-defense">System Attacks and Defense</h3>
<p>This section provides a summary of some of the better known system attacks, along with reasons for using a firewall service as the first line of defense.</p>
<h4 id="external-attacks">External Attacks</h4>
<p>The Internet is a haven for those who want to adversely affect organizations or steal trade secrets to gain competitive advantage. If you install a perimeter firewall and look at the log of intrusions, you will be surprised by the volume. Most of these intrusions are just probes to see if your machine responds and to find out what services you are running. This may seem innocuous, but if the attacker discovers your machine he may then attack your service, knowing what weaknesses it has.</p>
<h4 id="internal-attacks">Internal Attacks</h4>
<p>In addition to providing protection from Internet-based attacks, sensitive information must be protected. Most organizations have sensitive information that should be protected from certain users on the internal network, including employees but also vendors, contractors, and customers. While a perimeter firewall is primarily there to protect against external intrusions, knowledgeable internal users may try to enter via the Internet.</p>
<h4 id="types-of-intrusion">Types of Intrusion</h4>
<p>Intrusion threats can take many forms, and describing them all here would serve only a limited purpose, because new ones are created on a daily basis. Some intrusions, such as pinging a server address, may seem harmless, but after discovering the presence of a server, the hacker might attempt a more serious attack. In other words, all intrusions should be considered potentially harmful. Some of the major intrusions are:</p>
<ul>
<li><p>Packet Sniffers</p>
<p>A sniffer is a software application or hardware device that attaches to the LAN and captures information from Ethernet frames. The original intention of these systems was to troubleshoot and analyze Ethernet traffic or to delve deeper into the frames to examine individual IP packets. Sniffers operate in promiscuous mode; that is, they listen to every packet on the physical wire. Many applications, such as Telnet, send user name and password information in clear text that can be read by sniffer products, and therefore a hacker with a sniffer could gain access to many applications.</p>
<p>Sniffing cannot be prevented by a firewall as a sniffer does not generate network traffic. There are various measures to counter sniffing, primarily by ensuring that strong encrypted passwords are used, but this is beyond the scope of this module.</p>
</li>
<li><p>IP Spoofing</p>
<p>IP spoofing occurs when the source address of an IP packet is changed to hide the identity of the sender. Because the routing operation within the Internet uses only the destination address to send a packet on its way and ignores the source address, a hacker can send a destructive packet to your system disguising the source without you knowing where it came from. Spoofing is not necessarily destructive, but it signals that an intrusion is at hand. The address may be outside your network (to hide the identity of the intruder) or it may be one of your trusted internal addresses with privileged access. Spoofing is typically used for denial of service attacks, which are described later in this module.</p>
<p>It is possible to prevent IP spoofing by implementing either or both of the following mechanisms:</p>
<ul>
<li><p>Access control</p>
<p>Deny access to incoming packets from the Internet with a source address that is on your internal network.</p>
</li>
<li><p>RFC 2827 filtering</p>
<p>It is important to ensure that no IP spoofing takes place on your outgoing traffic. Spoofed packets must originate on somebody's network; you want to be certain that your network is not being used as a source for spoofing. Therefore, you should prevent all outgoing traffic from your network that does not have a source address within your own allocation. Your ISP might also be able to drop spoofed traffic from your network by checking if the source address is one that belongs to your network. This technique is known as RFC 2827 filtering; contact your ISP for more information about how to implement it. Filtering outbound traffic has no benefit for you, but another network performing similar filtering could prevent a spoofed attack on your network. Most modern firewalls have the ability to prevent inbound IP spoofing.</p>
</li>
</ul>
</li>
<li><p>Denial-of-Service Attacks</p>
<p>Denial of service (DoS) attacks are among the hardest to prevent. They differ from other types of attack in that they do not cause permanent damage to your network; instead, they try to stop the network functioning by bombarding a particular computer (either a server or a network device), or by degrading the throughput of network links to the point where performance is so abysmal it causes ill-will among customers and loss of business to the organization. A distributed DoS (DDoS) attack is an attack initiated from many other computers concentrating the bombardment on your system. The attacking computers have not necessarily initiated the attack themselves, but due to their own security vulnerabilities, they have allowed themselves to be infiltrated by a hacker who has directed them to send high volumes of data to your network, congesting either the link to your ISP or one of your devices.</p>
</li>
<li><p>Application Layer Attacks</p>
<p>Application layer attacks are often the most publicized attacks, and usually exploit well-known weaknesses in applications, such as Web servers and database servers. The problem, particularly for Web servers, is that they are designed to be accessed by public users, who are unknown and cannot be trusted. Most attacks are against known deficiencies in the product, so the best defense is to install the latest updates from the manufacturers. The infamous Structured Query Language (SQL) Slammer worm affected 35,000 systems within a very short time of its release in January 2003. The worm exploited a known problem in Microsoft SQL Serverâ¢ 2000 for which Microsoft had already issued a fix four months earlier in August 2002, thus taking advantage of the fact that many administrators had neither applied the recommended update nor had adequate firewalls in place (which could have dropped packets destined for the port that the worm used). Note that a firewall is just a backstop in these situations; manufacturers recommend that upgrades should be applied to all products, particularly to prevent application layer attacks.</p>
</li>
<li><p>Network Reconnaissance</p>
<p>Network reconnaissance is the scanning of networks to discover valid IP addresses, domain name system (DNS) names, and IP ports prior to launching an attack. Although network reconnaissance is harmless by itself, discovering which addresses are in use can help someone launch a hostile attack. In fact, if you look at the logs for a firewall, you will find that most intrusions are of this nature; typical probes include scanning for listening transport control protocol (TCP) and user datagram protocol (UDP) ports, as well as for other well-known listening ports, such as those used by Microsoft SQL Server, NetBIOS, HTTP, and SMTP. All such probes seek a reply, which tells the hacker that the server exists and runs one of these services. Many of these probes can be prevented by the border router or by a firewall. Many services are present by default, but turn off any unrequired services, but turning off some of them may restrict your network diagnostics capabilities.</p>
</li>
<li><p>Viruses/Trojan Horses</p>
<p>Viruses generally cannot be detected by firewalls, as they are often embedded in email attachments. Traditional viruses tended to just damage the device that they had contaminated, but modern viruses often try to replicate and damage either other local machines or spread out onto the Internet by sending multiple emails with the virus attached. Many of these viruses install a Trojan Horse program on the contaminated device. A Trojan Horse program may not do any direct damage, but rather sends information from the device on which it is installed over the Internet to the hacker, who can then launch a targeted attack on that device, knowing what software it is running and where it is vulnerable. While the primary defense against viruses is always to maintain up-to-date anti-virus software on the device, the perimeter firewall may be useful in limiting the effectiveness of the Trojan Horse program.</p>
</li>
</ul>
<h3 id="device-definition">Device Definition</h3>
<p>A firewall is a mechanism for controlling the flow of IP traffic between two networks. Firewall devices typically operate at L3 of the OSI model, although some models can operate at higher levels as well.</p>
<p>Firewalls generally provide the following benefits:</p>
<ul>
<li><p>Defending internal servers from network attacks</p>
</li>
<li><p>Enforcing network usage and access policies</p>
</li>
<li><p>Monitoring traffic and generating alerts when suspicious patterns are detected</p>
</li>
</ul>
<p>It is important to note that firewalls mitigate only certain types of security risks. A firewall does not usually prevent the damage that can be inflicted against a server with a software vulnerability. Firewalls should be implemented as part of an organization's comprehensive security architecture.</p>
<h3 id="firewall-features">Firewall Features</h3>
<p>Depending on the features that a firewall supports, traffic is either allowed or blocked using a variety of techniques. These techniques offer varying degrees of protection, based on the capabilities of the firewall. The following firewall features are listed in increasing order of complexity:</p>
<ul>
<li><p><strong>Network adapter input filters</strong></p>
</li>
<li><p><strong>Static packet filters</strong></p>
</li>
<li><p><strong>Network address translation (NAT)</strong></p>
</li>
<li><p><strong>Stateful inspection</strong></p>
</li>
<li><p><strong>Circuit-level inspection</strong></p>
</li>
<li><p><strong>Proxy</strong></p>
</li>
<li><p><strong>Application layer filtering</strong></p>
</li>
</ul>
<p>In general, firewalls that provide complex features will also support the simpler features. However, you should read vendor information carefully when choosing a firewall, because there can be subtle differences between its implied and actual capabilities. When selecting a firewall, you must inquire about the features and test it to ensure that the product can indeed perform according to specifications.</p>
<h4 id="network-adapter-input-filters">Network Adapter Input Filters</h4>
<p>Network adapter input filtering examines source or destination addresses and other information in the incoming packet, and either blocks the packet or allows it through. It applies only to incoming traffic and cannot control outgoing traffic. It matches IP addresses, port numbers for UDP and TCP, as well as the protocol of the traffic, TCP, UDP, and generic routing encapsulation (GRE).</p>
<p>For a perimeter firewall protecting a Web server, legal incoming traffic should only be able to access the Web server IP address and usually a limited range of port numbers, such as 80 for HTTP or 443 for HTTPS. Although the perimeter firewall should have this control, it should also be implemented in the border router.</p>
<p>Network adapter input filtering allows a quick and efficient denial of standard incoming packets that meet the rule criteria configured in the firewall. However, this form of filtering can easily be evaded, as it only matches the headers of the IP traffic, working on the basic assumption that the traffic being filtered follows IP standards and is not crafted to evade the filtering.</p>
<h4 id="static-packet-filters">Static Packet Filters</h4>
<p>Static packet filters are similar to network adapter input filters in the sense that they simply match IP headers to determine whether or not to allow the traffic to pass through the interface. However, static packet filters allow control over outbound as well as inbound communications to an interface. Furthermore, static packet filters typically allow an additional function over the network adapter filtering, which is to check if the Acknowledged (ACK) bit is set on the IP header. The ACK bit gives information on whether the packet is a new request or a return request from an original request. It does not verify that the packet was originally sent by the interface receiving it; it merely checks whether the traffic coming into the interface appears to be return traffic, based on the conventions of the IP headers.</p>
<p>This technique only applies to the TCP protocol and not the UDP protocol. Like network adapter input filtering, static packet filtering is very fast, but its capabilities are limited, and it can be evaded by specifically crafted traffic.</p>
<p>As with network adapter input filtering, static packet filtering should also be implemented on the border router in addition to the perimeter firewall.</p>
<h4 id="network-address-translation">Network Address Translation</h4>
<p>In the worldwide IP address range, certain address ranges are designated as <em>private addresses</em>. These are intended to be used in your organization and have no meaning in the Internet. Traffic destined for any of these IP addresses cannot be routed through the Internet, so assigning a private address to your internal devices gives them some protection against intrusion. However, these internal devices often need to access the Internet themselves and so Network Address Translation (NAT) converts the private address into an Internet address.</p>
<p>Although NAT is not strictly a firewall technology, concealing the real IP address of a server prevents attackers from gaining valuable fingerprinting information about the server.</p>
<h4 id="stateful-inspection">Stateful Inspection</h4>
<p>In stateful inspection, all outgoing traffic is logged in a state table. When the connection traffic returns to the interface, the state table is checked to ensure that the traffic originated from this interface. Stateful inspection is a bit slower than static packet filtering; however, it ensures that the traffic is allowed to pass only if it matches the outgoing traffic requests. The state table contains items such as destination IP address, source IP address, port being called, and originating host.</p>
<p>Certain firewalls may store more information in the state table than others (such as IP fragments sent and received). The firewall can verify that the traffic is processed when all or just some of the fragmented information returns. Different vendors' firewalls implement the stateful inspection feature differently; so you should read the firewall documentation carefully.</p>
<p>The stateful inspection feature typically assists in mitigating the risk posed by network reconnaissance and IP spoofing.</p>
<h4 id="circuit-level-inspection">Circuit-level Inspection</h4>
<p>With circuit-level filtering, it is possible to inspect sessions, as opposed to connections or packets. Sessions are established only in response to a user request and may include multiple connections. Circuit-level filtering provides built-in support for protocols with secondary connections, such as FTP and streaming media. It typically assists in mitigating the risks posed by network reconnaissance, DoS, and IP spoofing attacks.</p>
<h4 id="proxy-firewalls">Proxy Firewalls</h4>
<p>Proxy firewalls request information on behalf of a client. In contrast to the firewall technologies discussed above, the communication does not occur directly between the client and the server hosting the service. Instead, the proxy firewall gathers information on behalf of the client and returns the data it receives from the service back to the client. Because the proxy server gathers this information for one client, it also caches the content to disk or memory. If another client makes an identical data request, the request can be satisfied from the cache, resulting in reduced network traffic and server processing time.</p>
<p>For non-encrypted sessions, such as FTP read-only and HTTP sessions, a proxy firewall actually creates individual sessions with both the client and the server, so there is never a direct connection between the two. For encrypted sessions, on the other hand, the proxy server verifies that the header information conforms to the standards of Secure Sockets Layer (SSL) communication before allowing the traffic to pass. However, the proxy cannot inspect the data passing by, because it is encrypted end-to-end by the client and the server.</p>
<p>The advantages of a proxy server over the firewall technologies discussed above include:</p>
<ul>
<li><p>No direct connections between client and server</p>
<p>The client and server do not usually make direct connections to each other; even if they do (such as with SSL), protocol header and traffic inspection is performed.</p>
</li>
<li><p>The server can cache the content of frequently requested sites</p>
<p>Caching saves bandwidth and prevents unnecessary requests from exiting the environment.</p>
</li>
<li><p>Validation of protocols that pass through it</p>
<p>In addition to validating the port number through which the communication travels, proxy servers also validate the protocols that pass through them. The most typical protocols that are inspected are FTP download only, HTTP, SSL, and some text messaging services (such as text only, no video, audio, or file transfers).</p>
</li>
<li><p>Can be configured to forward requests based on a user's ID</p>
<p>Proxy servers can often be configured to forward requests based on user ID (that is, restrictions can be set only for certain users), rather than just source IP, port, or protocol.</p>
</li>
</ul>
<p>The main drawback to a proxy server is that it requires much more processing power to perform protocol inspection. However, processing power is increasing all the time, so this is becoming less of an issue. Still, proxy servers do not have the throughput of a stateful or packet filtering firewall. Arguably, the added benefits of protocol inspection are necessary in a world where high-speed networks abound for home users and where Internet connectivity is becoming increasingly available to non-trusted nodes that are connected by ISPs with little or no legal obligation to provide trusted Internet services.</p>
<p>The proxy feature typically assists in mitigating the risk posed by network reconnaissance, DoS, IP spoofing attacks, virus/Trojan horse, and some application layer attacks.</p>
<h4 id="application-layer-filtering">Application Layer Filtering</h4>
<p>The most sophisticated level of firewall traffic inspection is application-level filtering. Good application filters allow you to analyze a data stream for a particular application and provide application-specific processing, including inspecting, screening or blocking, redirecting, and modifying data as it passes through the firewall.</p>
<p>This mechanism is used to protect against things like unsafe SMTP commands or attacks against internal Domain Name System (DNS) servers. Third-party tools for content screening, such as virus detection, lexical analysis, and site categorization, can usually be added to your firewall.</p>
<p>An application layer firewall has the ability to inspect many different protocols, based on the traffic that passes through it. Unlike a proxy firewall, which usually inspects the Internet traffic (such as HTTP, FTP download, and SSL) the application layer firewall has much greater control over the way that traffic travels through the firewall. For example, an application layer firewall is capable of allowing only the UDP traffic that originates inside the firewall boundary to pass through. If an Internet host was to port scan a stateful firewall to see if it allowed DNS traffic into the environment, the port scan would probably show that the well-known port associated with DNS was open, but once an attack is mounted, the stateful firewall would reject the requests, because they did not originate internally. An application layer firewall might open ports dynamically, based on whether or not the traffic originates internally.</p>
<p>The application layer firewall feature assists in mitigating the risks posed by IP spoofing, DoS, some application layer attacks, network reconnaissance, and virus/Trojan horse attacks. Drawbacks of an application layer firewall are similar to the proxy, in the sense that it requires much more processing power and is typically much slower at passing traffic than stateful or static filtering firewalls. The most important consideration when using an application layer firewall is determining what the firewall is capable of doing at the application layer.</p>
<p>The application layer feature ensures that the traffic being passed over a port is appropriate. Unlike a packet filter or stateful inspection firewall that simply looks at the port and at the source and destination IP addresses, firewalls that support the application layer filtering feature have the ability to inspect the both data and the commands being passed back and forth.</p>
<p>Most firewalls that support the application layer feature only have application layer filtering for clear text traffic, such as a proxy-aware messaging service, HTTP, and FTP. It is important to keep in mind that a firewall which supports this feature can govern traffic going in and out of the environment. Another advantage of this feature is the ability to inspect DNS traffic as it goes through the firewall to look for DNS-specific commands. This additional layer of protection ensures that users or attackers cannot conceal information in allowed types of traffic.</p>
<p>If your organization has an online store, which collects credit card numbers and other personal information about customers, it is prudent to take the highest level of precautions in protecting this information. In these cases, it is essential that this type of high security data is encrypted between the user's PC and your Web servers, using the Secure Sockets Layer (SSL) protocol.</p>
<p>It is important to distinguish those cases where the application layer feature is used in conjunction with SSL. SSL is encrypted, and the firewall cannot understand the protocol commands because they are located within the encrypted packet. Each firewall that supports the application layer feature handles this differently, so it is important to read the fine print of the documentation for whichever firewall you choose.</p>
<p>The problem is that no device is supposed to be able to inspect data once an SSL session is established and the encryption is negotiated. For example, a client using a firewall that supports the proxy-type application layer feature requests the firewall to initiate a connection to a secure Web server on its behalf. The firewall and the server do the initial setup of the TCP connection, and the firewall hands over the connection to the client to set up the encryption with the server. After the connection is handed over to the client, the firewall no longer has the ability to inspect the data.</p>
<p>When the application layer feature is used to expose Internet services publicly, the following options are available:</p>
<ul>
<li><p>Terminating the SSL traffic at the firewall</p>
<p>This allows the firewall to inspect incoming SSL connections for legitimate Web traffic and to discard traffic as the firewall decrypts the data for the Internet service.</p>
</li>
<li><p>Regenerating SSL traffic from the firewall to the exposed Web service</p>
<p>This is particularly helpful if basic credentials (such as clear text user name and password) are used within the SSL tunnel. Individuals who can sniff traffic between the internal interface of the firewall and the published Web service cannot get at the traffic because it is re-encrypted.</p>
</li>
<li><p>Allowing the SSL traffic to pass through the firewall to the back-end server</p>
<p>This is essentially the reverse approach of the SSL connection between the internal client and the external server.</p>
</li>
</ul>
<p>These options provide numerous ways of controlling how far an encrypted session can be allowed to tunnel into an environment. In general, the closer you can keep encrypted traffic to the edge of your environment the better, because nothing in between can really see what is inside that tunnel.</p>
<h3 id="firewall-classes">Firewall Classes</h3>
<p>This section presents a number of firewall classes, each of which provides certain features. Specific firewall classes can be used to respond to specific requirements in the IT architecture design.</p>
<p>Grouping firewalls into classes allows for the abstraction of the hardware from the requirements of the service, so that service requirements can be matched against class features. As long as a firewall fits into a specific class, you can assume it supports all the services of that class.</p>
<p>The various classes are as follows:</p>
<ul>
<li><p>Personal firewalls</p>
</li>
<li><p>Router firewalls</p>
</li>
<li><p>Low-end hardware firewalls</p>
</li>
<li><p>High-end hardware firewalls</p>
</li>
<li><p>Server firewalls</p>
</li>
</ul>
<p>It is important to understand that some of these classes overlap; this is by design. The overlap allows one type of firewall solution to span multiple classes. Many classes can also be served by more than one hardware model from the same vendor, so that an organization can select a model that best suits their needs both now and in the future.</p>
<p>Apart from the price and feature set, firewalls can be classified on the basis of performance (or throughput). However, many manufacturers do not provide any throughput figures for their firewall. Where they are provided (usually for hardware firewall devices), no standard measurement process is followed, which makes comparisons between manufacturers difficult. For example, one measure is the number of bits per second (bps), but as the firewall is actually passing IP packets, this measure is meaningless if the packet size used in measuring the rate is not included.</p>
<p>The following sections define each firewall class in detail.</p>
<h3 id="class-1---personal-firewall">Class 1 - Personal Firewall</h3>
<p>A personal firewall is defined as a software service that provides a simple firewall capability for a personal computer. As the number of permanent Internet connections (as opposed to dial-up connections) has grown, the use of personal firewalls has increased.</p>
<p>Although designed to protect a single computer, a personal firewall can also protect a small network, if the computer on which it is installed is sharing its connection to the Internet with other computers on the internal network. However, the performance of personal firewall software is limited and it degrades the performance of the personal computer on which it is installed. The protection mechanisms are usually less effective than a dedicated firewall solution, because they are usually restricted to blocking IP and port addresses, although generally speaking a lower level of protection is needed on a personal computer.</p>
<p>Personal firewalls may be supplied with an operating system or at a very low cost. They are suitable for their intended purpose, but because of their restricted performance and functionality, they should not be considered for use in an enterprise, even in small satellite offices. They are, however, particularly suitable for mobile users on laptop computers.</p>
<p>Personal firewalls vary tremendously in their capabilities and price. However, lack of a specific feature, especially on a laptop, might not be of great importance. The following table shows the features commonly available in personal firewalls.</p>
<p><strong>Table 1. Class 1 - Personal Firewalls</strong></p>
<table>
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr class="header">
<th><p>Firewall Attribute</p></th>
<th><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Basic features supported</p></td>
<td><p>Most personal firewalls support static packet filters, NAT, and stateful inspection, while some support circuit-level inspection and/or application layer filtering.</p></td>
</tr>
<tr class="even">
<td><p>Configuration</p></td>
<td><p>Automatic (manual option also available)</p></td>
</tr>
<tr class="odd">
<td><p>Block or allow IP addresses</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="even">
<td><p>Block or allow protocol or port numbers</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="odd">
<td><p>Block or allow incoming ICMP messages</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="even">
<td><p>Control outgoing access</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="odd">
<td><p>Application protection</p></td>
<td><p>Possibly</p></td>
</tr>
<tr class="even">
<td><p>Audible or visible alerts</p></td>
<td><p>Possibly</p></td>
</tr>
<tr class="odd">
<td><p>Log file of attacks</p></td>
<td><p>Possibly</p></td>
</tr>
<tr class="even">
<td><p>Real-time alerts</p></td>
<td><p>Possibly</p></td>
</tr>
<tr class="odd">
<td><p>VPN support</p></td>
<td><p>Typically no</p></td>
</tr>
<tr class="even">
<td><p>Remote management</p></td>
<td><p>Typically no</p></td>
</tr>
<tr class="odd">
<td><p>Manufacturer support</p></td>
<td><p>Varies widely (depends on the product)</p></td>
</tr>
<tr class="even">
<td><p>High-availability option</p></td>
<td><p>No</p></td>
</tr>
<tr class="odd">
<td><p>Number of concurrent sessions</p></td>
<td><p>1 to 10</p></td>
</tr>
<tr class="even">
<td><p>Modular upgradeability (hardware or software)</p></td>
<td><p>None to limited</p></td>
</tr>
<tr class="odd">
<td><p>Price range</p></td>
<td><p>Low (free in some cases)</p></td>
</tr>
</tbody>
</table>
<p>Personal firewalls offer the following advantages and disadvantages.</p>
<h4 id="advantages">Advantages</h4>
<p>The advantages of personal firewalls include:</p>
<ul>
<li><p>Inexpensive</p>
<p>When only a limited number of licenses are required, personal firewalls are an inexpensive option. A personal firewall is integrated into versions of the Microsoft Windows XP operating system. Additional products that work with other versions of Windows or other operating systems are available for free or at limited cost.</p>
</li>
<li><p>Easy to configure</p>
<p>Personal firewall products tend to have basic configurations that work out-of-the-box with straightforward configuration options.</p>
</li>
</ul>
<h4 id="disadvantages">Disadvantages</h4>
<p>The disadvantages of personal firewalls include:</p>
<ul>
<li><p>Difficult to manage centrally</p>
<p>Personal firewalls need to be configured on every client, which adds to the management overhead.</p>
</li>
<li><p>Only basic control</p>
<p>Configuration tends to be a combination of static packet filtering and permission-based blocking of applications only.</p>
</li>
<li><p>Performance limitations</p>
<p>Personal firewalls are designed to protect a single personal computer. Using them on a computer that serves as a router for a small network will lead to degraded performance.</p>
</li>
</ul>
<h3 id="class-2---router-firewall">Class 2 - Router Firewall</h3>
<p>Routers usually support one or more of the firewall features discussed previously; they can be subdivided into low-end devices designed for Internet connections and high-end traditional routers. The low-end routers provide basic firewall features for blocking and allowing specific IP addresses and port numbers, and use NAT to hide interior IP addresses. They often provide the firewall feature as standard, optimized to block intrusions from the Internet, and while they need no configuration, they can be refined with further configuration.</p>
<p>High-end routers can be configured to tighten up access by barring the more obvious intrusions, such as pings, and by implementing other IP address and port restrictions through the use of ACLs. Additional firewall features may be available, which provide stateful packet filtering in some routers. In high-end routers, the firewall capability is similar to that of a hardware firewall device at a lower cost, but also with a lower throughput.</p>
<p><strong>Table 2. Class 2 - Router Firewall</strong></p>
<table>
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr class="header">
<th><p>Firewall Attribute</p></th>
<th><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Basic features supported</p></td>
<td><p>Most router firewalls support static packet filters. Lower-end routers typically support NAT. Higher-end routers may support stateful inspection and/or application layer filtering.</p></td>
</tr>
<tr class="even">
<td><p>Configuration</p></td>
<td><p>Typically automatic on lower-end routers (with manual options). Often manual on higher-end routers.</p></td>
</tr>
<tr class="odd">
<td><p>Block or allow IP addresses</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="even">
<td><p>Block or allow protocol/port numbers</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="odd">
<td><p>Block or allow incoming ICMP messages</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="even">
<td><p>Control outgoing access</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="odd">
<td><p>Application protection</p></td>
<td><p>Possibly</p></td>
</tr>
<tr class="even">
<td><p>Audible or visible alerts</p></td>
<td><p>Typically</p></td>
</tr>
<tr class="odd">
<td><p>Log file of attacks</p></td>
<td><p>In many cases</p></td>
</tr>
<tr class="even">
<td><p>Real-time alerts</p></td>
<td><p>In many cases</p></td>
</tr>
<tr class="odd">
<td><p>VPN Support</p></td>
<td><p>Common in lower-end routers, not as common in higher-end routers. Separate dedicated devices or servers for this task are available.</p></td>
</tr>
<tr class="even">
<td><p>Remote management</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="odd">
<td><p>Manufacturer support</p></td>
<td><p>Typically limited in lower-end routers and good in higher-end routers.</p></td>
</tr>
<tr class="even">
<td><p>High-availability option available</p></td>
<td><p>Low End: No - High End: Yes</p></td>
</tr>
<tr class="odd">
<td><p>Number of concurrent sessions</p></td>
<td><p>10 - 1,000</p></td>
</tr>
<tr class="even">
<td><p>Modular upgradeability (hardware or software)</p></td>
<td><p>Low End: No - High End: Limited</p></td>
</tr>
<tr class="odd">
<td><p>Price range</p></td>
<td><p>Low to High</p></td>
</tr>
</tbody>
</table>
<p>Router firewalls offer the following advantages and disadvantages.</p>
<h4 id="advantages-1">Advantages</h4>
<p>The advantages of router firewalls include:</p>
<ul>
<li><p>Low cost solution</p>
<p>Activation of an existing router firewall feature may not add any cost to the price of the router, and it requires no additional hardware.</p>
</li>
<li><p>Configuration can be consolidated</p>
<p>Router firewall configuration can be accomplished when the router is configured for normal operations, thereby minimizing the management effort. This solution is particularly suitable for satellite branch offices, since network hardware and manageability are simplified.</p>
</li>
<li><p>Investment protection</p>
<p>Router firewall configuration and management is familiar to the operations staff, so no retraining is required. Network cabling is simplified, because no additional hardware is installed, which also simplifies network management.</p>
</li>
</ul>
<h4 id="disadvantages-1">Disadvantages</h4>
<p>The disadvantages of router firewalls include:</p>
<ul>
<li><p>Limited functionality</p>
<p>In general, low-end routers only offer basic firewall features. High-end routers typically offer higher-level firewall features, but may need considerable configuration, much of which is done through the addition of controls that are easily forgotten, making it somewhat difficult to configure correctly.</p>
</li>
<li><p>Only basic control</p>
<p>Configuration tends to be a combination of static packet filtering and permission-based blocking of applications only.</p>
</li>
<li><p>Performance impact</p>
<p>Using a router as a firewall detracts from the performance of the router and slows the routing function, which is its primary task.</p>
</li>
<li><p>Log file performance</p>
<p>Use of a log file to catch unusual activities can seriously reduce the performance of the router, especially when it is already under attack.</p>
</li>
</ul>
<h3 id="class-3---low-end-hardware-firewall">Class 3 - Low-end Hardware Firewall</h3>
<p>At the low end of the hardware firewall market are Plug-and-Play units, which require little or no configuration. These devices often incorporate switch and/or VPN functionality as well. Low-end hardware firewalls are targeted at small businesses and for internal use in larger organizations. They generally offer static filtering capabilities and basic remote management functionality. Devices from larger manufacturers may run the same software as their higher-end counterparts, providing an upgrade path should one be required.</p>
<p><strong>Table 3. Class 3 - Low-end Hardware Firewall</strong></p>
<table>
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr class="header">
<th><p>Firewall Attribute</p></th>
<th><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Basic features supported</p></td>
<td><p>Most low-end hardware firewalls support static packet filters and NAT. May support stateful inspection and/or application layer filtering.</p></td>
</tr>
<tr class="even">
<td><p>Configuration</p></td>
<td><p>Automatic (manual option also available)</p></td>
</tr>
<tr class="odd">
<td><p>Block or allow IP addresses</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="even">
<td><p>Block or allow protocol/port numbers</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="odd">
<td><p>Block or allow incoming ICMP messages</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="even">
<td><p>Control outgoing access</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="odd">
<td><p>Application protection</p></td>
<td><p>Typically not</p></td>
</tr>
<tr class="even">
<td><p>Audible or visible alerts</p></td>
<td><p>Typically not</p></td>
</tr>
<tr class="odd">
<td><p>Log file of attacks</p></td>
<td><p>Typically not</p></td>
</tr>
<tr class="even">
<td><p>Real-time alerts</p></td>
<td><p>Typically not</p></td>
</tr>
<tr class="odd">
<td><p>VPN Support</p></td>
<td><p>Sometimes</p></td>
</tr>
<tr class="even">
<td><p>Remote management</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="odd">
<td><p>Manufacturer support</p></td>
<td><p>Limited</p></td>
</tr>
<tr class="even">
<td><p>High-availability option available</p></td>
<td><p>Typically not</p></td>
</tr>
<tr class="odd">
<td><p>Number of concurrent sessions</p></td>
<td><p>&gt; 10 - 7500</p></td>
</tr>
<tr class="even">
<td><p>Modular upgradeability (hardware or software)</p></td>
<td><p>Limited</p></td>
</tr>
<tr class="odd">
<td><p>Price range</p></td>
<td><p>Low</p></td>
</tr>
</tbody>
</table>
<p>Low-end hardware firewalls offer the following advantages and disadvantages.</p>
<h4 id="advantages-2">Advantages</h4>
<p>The advantages of low-end hardware firewalls include:</p>
<ul>
<li><p>Low cost</p>
<p>Low-end firewalls can be purchased inexpensively.</p>
</li>
<li><p>Simple Configuration</p>
<p>Almost no configuration is required.</p>
</li>
</ul>
<h4 id="disadvantages-2">Disadvantages</h4>
<p>The disadvantages of low-end hardware firewalls include:</p>
<ul>
<li><p>Limited functionality</p>
<p>In general, low-end hardware firewalls only offer basic firewall functionality. They cannot be run in parallel for redundancy.</p>
</li>
<li><p>Poor throughput</p>
<p>Low-end hardware firewalls are not designed to handle high-throughput connections, which may cause bottlenecks.</p>
</li>
<li><p>Limited manufacturer support</p>
<p>As these are low cost items, manufacturer support is usually limited to e-mail and/or a Web site.</p>
</li>
<li><p>Limited upgradeability</p>
<p>Usually there can be no hardware upgrades, though there are often periodic firmware upgrades available.</p>
</li>
</ul>
<h3 id="class-4---high-end-hardware-firewall">Class 4 - High-end Hardware Firewall</h3>
<p>At the high end of the hardware firewall market, there are high-performance, highly resilient products, which are suitable for the enterprise or service provider. These usually offer the best protection, without reducing the performance of the network.</p>
<p>Resilience can be achieved by adding a second firewall running as a hot standby unit, which maintains the current table of connections through automatic stateful synchronization.</p>
<p>Firewalls should be used in every network connected to the Internet, because intrusion happens constantly; DoS attacks, theft, and data corruption are being attempted all the time. High-end hardware firewall units should be considered for deployment in central or headquarters locations.</p>
<p><strong>Table 4. Class 4 - High-end Hardware Firewall</strong></p>
<table>
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr class="header">
<th><p>Firewall Attribute</p></th>
<th><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Basic features supported</p></td>
<td><p>Most high-end hardware firewalls support static packet filters and NAT. They may support stateful inspection and/or application layer filtering.</p></td>
</tr>
<tr class="even">
<td><p>Configuration</p></td>
<td><p>Typically manual</p></td>
</tr>
<tr class="odd">
<td><p>Block or allow IP addresses</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="even">
<td><p>Block or allow protocol/port numbers</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="odd">
<td><p>Block or allow incoming ICMP messages</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="even">
<td><p>Control outgoing access</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="odd">
<td><p>Application protection</p></td>
<td><p>Potentially</p></td>
</tr>
<tr class="even">
<td><p>Audible or visible alerts</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="odd">
<td><p>Log file of attacks</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="even">
<td><p>Real-time alerts</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="odd">
<td><p>VPN support</p></td>
<td><p>Potentially</p></td>
</tr>
<tr class="even">
<td><p>Remote management</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="odd">
<td><p>Manufacturer support</p></td>
<td><p>Good</p></td>
</tr>
<tr class="even">
<td><p>High-availability option available</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="odd">
<td><p>Number of concurrent sessions</p></td>
<td><p>&gt; 7500 - 500,000</p></td>
</tr>
<tr class="even">
<td><p>Modular upgradeability (hardware or software)</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="odd">
<td><p>Price range</p></td>
<td><p>High</p></td>
</tr>
</tbody>
</table>
<p>High-end hardware firewalls offer the following advantages and disadvantages.</p>
<h4 id="advantages-3">Advantages</h4>
<p>The advantages of high-end hardware firewalls include:</p>
<ul>
<li><p>High performance</p>
<p>Hardware firewall products are designed for a single purpose and provide high levels of intrusion-blocking together with the least degradation of performance.</p>
</li>
<li><p>High availability</p>
<p>High-end hardware firewalls can be connected together for optimal availability and load balancing.</p>
</li>
<li><p>Modular systems</p>
<p>Both hardware and software can be upgraded for new requirements. Hardware upgrades may include additional Ethernet ports, while software upgrades may include detection of new methods of intrusion.</p>
</li>
<li><p>Remote management</p>
<p>High-end hardware firewalls offer better remote management functionality than their low-end counterparts.</p>
</li>
<li><p>Resilience</p>
<p>High-end hardware firewalls may have availability and resilience features, such as hot or active standby with a second unit.</p>
</li>
<li><p>Application layer filtering</p>
<p>Unlike their low-end counterparts, high-end hardware firewalls provide filtering for well-known applications at the L4, L5, L6, and L7 layers of the OSI model.</p>
</li>
</ul>
<h4 id="disadvantages-3">Disadvantages</h4>
<p>The disadvantages of high-end hardware firewalls include:</p>
<ul>
<li><p>High cost</p>
<p>High-end hardware firewalls tend to be expensive. Although they can be purchased for as little as $100, the cost is much higher for an enterprise firewall, since the price is often based on the number of concurrent sessions, throughput, and availability requirements.</p>
</li>
<li><p>Complex configuration and management</p>
<p>Because high-end hardware firewalls have much greater capability than low-end firewalls, they are also more complex to configure and manage.</p>
</li>
</ul>
<h3 id="class-5---high-end-server-firewall">Class 5 - High-end Server Firewall</h3>
<p>A variety of products are available that add firewall capability to a high-end server, providing robust fast protection on standard hardware and software systems. The benefits of this approach are the use of familiar hardware or software, which provides a reduced number of inventory items, simplified training and management, reliability, and expandability. Many of the high-end hardware firewall products are implemented on an industry-standard hardware platform running an industry-standard operating system (but hidden from view) and therefore have little difference, either technically or in performance, from a server firewall. However, because the operating system is still visible, the server firewall feature can be upgraded and made more resilient by techniques such as clustering.</p>
<p>Because the server firewall is a server running a commonly-used operating system, additional software, features, and functionality can be added to the firewall from a variety of vendors (not just one vendor, which is the case with a hardware firewall). Familiarity with the operating system can also lead to more effective firewall protection, because some of the other classes need considerable expertise for full and correct configuration.</p>
<p>This class is suitable where there is a high investment in a particular hardware or software platform, because using the same platform for the firewall makes the management task simpler.</p>
<p>The caching capability of this class can also be very effective.</p>
<p><strong>Table 5. Class 5 - High-end Server Firewall</strong></p>
<table>
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr class="header">
<th><p>Firewall Attribute</p></th>
<th><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Features supported</p></td>
<td><p>Most high-end server firewalls support static packet filters and NAT. They may also support stateful inspection and/or application layer filtering.</p></td>
</tr>
<tr class="even">
<td><p>Configuration</p></td>
<td><p>Typically manual</p></td>
</tr>
<tr class="odd">
<td><p>Block or allow IP addresses</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="even">
<td><p>Block or allow protocol/port numbers</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="odd">
<td><p>Block or allow incoming ICMP messages</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="even">
<td><p>Control outgoing access</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="odd">
<td><p>Application protection</p></td>
<td><p>Potentially</p></td>
</tr>
<tr class="even">
<td><p>Audible or visible alerts</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="odd">
<td><p>Log file of attacks</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="even">
<td><p>Real-time alerts</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="odd">
<td><p>VPN support</p></td>
<td><p>Potentially</p></td>
</tr>
<tr class="even">
<td><p>Remote management</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="odd">
<td><p>Manufacturer support</p></td>
<td><p>Good</p></td>
</tr>
<tr class="even">
<td><p>High-availability option available</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="odd">
<td><p>Number of concurrent sessions</p></td>
<td><p>&gt;50,000 (across multiple network segments)</p></td>
</tr>
<tr class="even">
<td><p>Modular upgradeability (hardware or software)</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="odd">
<td><p>Other</p></td>
<td><p>Commonly used operating system</p></td>
</tr>
<tr class="even">
<td><p>Price range</p></td>
<td><p>High</p></td>
</tr>
</tbody>
</table>
<p>Server firewalls offer the following general advantages and disadvantages.</p>
<h4 id="advantages-4">Advantages</h4>
<p>The advantages of server firewalls include:</p>
<ul>
<li><p>High performance</p>
<p>When run on a suitably sized server, these firewalls can offer high levels of performance.</p>
</li>
<li><p>Integration and consolidation of services</p>
<p>Server firewalls can make use of various features of the operating system on which they run. For example, firewall software that runs on the Microsoft Windows Serverâ¢ 2003 operating system can take advantage of the Network Load Balancing functionality built into the operating system. Additionally, the firewall could serve as a VPN server, again utilizing functionality in the Windows Server 2003 operating system.</p>
</li>
<li><p>Availability, resilience, and scalability</p>
<p>Because this firewall runs on standard personal computer hardware, it has all the availability, resilience, and scalability features of the personal computer platform on which it runs.</p>
</li>
</ul>
<h4 id="disadvantages-4">Disadvantages</h4>
<p>The disadvantages of server firewalls include:</p>
<ul>
<li><p>Requires high-end hardware</p>
<p>For high performance, most server firewall products require high-end hardware in terms of central processing unit (CPU), memory, and network interfaces.</p>
</li>
<li><p>Susceptible to vulnerabilities</p>
<p>Because server firewall products run on well-known operating systems, they are susceptible to the vulnerabilities present in the operating system and other software running on the server. Although this is also the case for hardware firewalls, their operating systems are not usually as familiar to attackers as most server operating systems.</p>
</li>
</ul>
<h3 id="perimeter-firewall-usage">Perimeter Firewall Usage</h3>
<p>A perimeter firewall exists to serve the requirements of users outside the boundaries of the organization. User types may include:</p>
<ul>
<li><p>Trusted</p>
<p>Employees of the organization, such as branch office workers, remote users, or users that work from home.</p>
</li>
<li><p>Semi-trusted</p>
<p>Business partners of the organization, for whom a higher level of trust exists than with untrusted users. However, it is often still a somewhat lower level of trust than that with the organization's employees.</p>
</li>
<li><p>Untrusted</p>
<p>For example, users of the organization's public Web site.</p>
</li>
</ul>
<p>It is important to consider the fact that the perimeter firewall is particularly open to external attack, because it must be broken for an intruder to get further into your network. It therefore becomes an obvious goal to break.</p>
<p>Firewalls used in a border capacity are an organization's gateway to the outside world. In many large organizations, the firewall class implemented here is typically a high-end hardware or server firewall, although some organizations use router firewalls. When selecting the firewall class to use as a perimeter firewall there are a number of issues that should be considered. The following table highlights these issues.</p>
<p><strong>Table 6. Perimeter Firewall Class Choice Issues</strong></p>
<table>
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr class="header">
<th><p>Issue</p></th>
<th><p>Typical Characteristics of a Firewall Implemented in This Capacity</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Required firewall features, as specified by the security administrator</p></td>
<td><p>This is a balance between the degree of security required versus the cost of the feature and the potential degradation of performance that increased security may cause. While many organizations want the maximum security for a perimeter firewall, some are not willing to take the performance hit. For example, very high-volume Web sites not involved with e-commerce may allow lower levels of security, based on higher levels of throughput obtained by using static packet filters instead of application layer filtering.</p></td>
</tr>
<tr class="even">
<td><p>Whether the device will be a dedicated physical device, provide other functionality, or be a logical firewall on a physical device</p></td>
<td><p>As the gateway between the Internet and the enterprise's network, the perimeter firewall is often implemented as a dedicated device, in order to minimize the attack surface and accessibility of internal networks that would occur if the device were breached.</p></td>
</tr>
<tr class="odd">
<td><p>Manageability requirements for the device, as specified by the organization's management architecture</p></td>
<td><p>Some form of logging is typically used, while an event monitoring mechanism is also often required. Remote administration may not be allowed here, in order to prevent a malicious user from remotely administering the device and only local administration will be allowed.</p></td>
</tr>
<tr class="even">
<td><p>Throughput requirements will likely be determined by the network and service administrators within the organization</p></td>
<td><p>These will vary for each environment, but the power of the hardware in the device or server and the firewall features being used will determine the overall network throughput available.</p></td>
</tr>
<tr class="odd">
<td><p>Availability requirements</p></td>
<td><p>As the gateway to the Internet in large enterprises, high levels of availability are often required, especially when a revenue-generating Web site is protected by a perimeter firewall.</p></td>
</tr>
</tbody>
</table>
<h3 id="perimeter-firewall-rules">Perimeter Firewall Rules</h3>
<p>In the following discussion, the term bastion host means a server located in your perimeter network that provides services to both internal and external users. Examples of bastion hosts include Web servers, and VPN servers.</p>
<p>Typically, your perimeter firewall will need the following rules implemented, either by default or by configuration:</p>
<ul>
<li><p>Deny all traffic unless explicitly allowed.</p>
</li>
<li><p>Block incoming packets that claim to have an internal or perimeter network source IP address.</p>
</li>
<li><p>Block outgoing packets that claim to have an external source IP address (traffic should only originate from bastion hosts).</p>
</li>
<li><p>Allow for UDP-based DNS queries and answers from the DNS resolver to DNS servers on the Internet.</p>
</li>
<li><p>Allow for UDP-based DNS queries and answers from the Internet DNS servers to the DNS advertiser.</p>
</li>
<li><p>Allow external UDP-based clients to query the DNS advertiser and provide an answer.</p>
</li>
<li><p>Allow TCP-based DNS queries and answers from Internet DNS servers to the DNS advertiser.</p>
</li>
<li><p>Allow outgoing mail from the outbound SMTP bastion host to the Internet.</p>
</li>
<li><p>Allow incoming mail from the Internet to the inbound SMTP bastion host.</p>
</li>
<li><p>Allow proxy-originated traffic from the proxy servers to reach the Internet.</p>
</li>
<li><p>Allow proxy-responses from the Internet to be directed to the proxy servers on the perimeter.</p>
</li>
</ul>
<h3 id="hardware-requirements">Hardware Requirements</h3>
<p>The hardware requirements for a perimeter firewall are different for software-based and hardware-based firewalls, as summarized below:</p>
<ul>
<li><p>Hardware-based firewall</p>
<p>These devices usually run specialized code on a custom-built hardware platform. They are typically scaled (and priced) based on the number of connections they can handle and the complexity of the software that is to be run.</p>
</li>
<li><p>Software-based firewalls</p>
<p>These are also configured based on the number of concurrent connections and the complexity of the firewall software. Calculators exist that can compute the processor speed, memory size, and disk space needed for a server, based on the number of connections supported. You should take into account other software that may also be running on the firewall server, such as load balancing and VPN software. Also, consider the methods for scaling the firewall both upward and outward. These methods include increasing the power of the system by adding additional processors, memory, and network cards, and also using multiple systems and load balancing to spread the firewall task across them (see the "Scalability" section later on in this module). Some products take advantage of symmetrical multiprocessing (SMP) to boost performance. The Network Load Balancing service of Windows Server 2003 can offer fault tolerance, high availability, efficiency, and performance improvements for some software firewall products.</p>
</li>
</ul>
<h3 id="firewall-availability">Firewall Availability</h3>
<p>To increase the availability of the perimeter firewall, it can be implemented as a single firewall device with redundant components or as a redundant pair of firewalls incorporating some type of failover and/or load balancing mechanism. The advantages and disadvantages of these options are presented in the following subsections.</p>
<h4 id="single-firewall-without-redundant-components">Single Firewall without Redundant Components</h4>
<p>A single firewall without redundant components is depicted in Figure 2:</p>
<p><a href="https://technet.microsoft.com/en-us/cc700828.pfnoredundancy-0-0_big(en-us,technet.10).gif" data-linktype="external"><img src="images/cc700828.pfnoredundancy-0-0(en-us,technet.10).gif" alt="Cc700828.pfnoredundancy-0-0(en-us,TechNet.10).gif" title="Cc700828.pfnoredundancy-0-0(en-us,TechNet.10).gif" data-linktype="relative-path"></a></p>
<p><strong>Figure 2. Single Firewall Without Redundant Components</strong></p>
<p>The use of a single firewall without redundant components offers the following advantages and disadvantages.</p>
<h5 id="advantages-5">Advantages</h5>
<p>The advantages of a single firewall with no redundancy include:</p>
<ul>
<li><p>Low cost</p>
<p>Because there is only one firewall, the hardware and licensing costs are low.</p>
</li>
<li><p>Simplified management</p>
<p>Management is simplified, because there is only one firewall for the site or enterprise.</p>
</li>
<li><p>Single logging source</p>
<p>All traffic logging is central to one device.</p>
</li>
</ul>
<h5 id="disadvantages-5">Disadvantages</h5>
<p>The disadvantages of a single firewall with no redundancy include:</p>
<ul>
<li><p>Single point of failure</p>
<p>There is a single point of failure for inbound and/or outbound Internet access.</p>
</li>
<li><p>Possible traffic bottleneck</p>
<p>A single firewall could be a traffic bottleneck, depending on the number of connections and the throughput required.</p>
</li>
</ul>
<h4 id="single-firewall-with-redundant-components">Single Firewall with Redundant Components</h4>
<p>A single firewall tier with redundant components is depicted in Figure 3:</p>
<p><a href="https://technet.microsoft.com/en-us/cc700828.pfwithredundancy-0-0_big(en-us,technet.10).gif" data-linktype="external"><img src="images/cc700828.pfwithredundancy-0-0(en-us,technet.10).gif" alt="Cc700828.pfwithredundancy-0-0(en-us,TechNet.10).gif" title="Cc700828.pfwithredundancy-0-0(en-us,TechNet.10).gif" data-linktype="relative-path"></a></p>
<p><strong>Figure 3. Single Firewall with Redundant Components</strong></p>
<p>Use of a single firewall with redundant components offers the following advantages and disadvantages.</p>
<h5 id="advantages-6">Advantages</h5>
<p>The advantages of a single firewall with redundant components include:</p>
<ul>
<li><p>Low cost</p>
<p>Because there is only one firewall, the hardware and licensing costs are low. The cost of the redundant components, such as a power supply, is not high.</p>
</li>
<li><p>Simplified management</p>
<p>Management is simplified because there is only one firewall for the site or enterprise.</p>
</li>
<li><p>Single logging source</p>
<p>All traffic logging is central to one device.</p>
</li>
</ul>
<h5 id="disadvantages-6">Disadvantages</h5>
<p>The disadvantages of a single firewall with redundant components include:</p>
<ul>
<li><p>Single point of failure</p>
<p>Depending on the number of redundant components, there may still be a single point of failure for inbound and/or outbound Internet access.</p>
</li>
<li><p>Cost</p>
<p>The cost is higher than a firewall without redundancy, and may also require a higher class of firewall to be able to incorporate redundancy.</p>
</li>
<li><p>Possible traffic bottleneck</p>
<p>A single firewall could be a traffic bottleneck, depending on the number of connections and the throughput required.</p>
</li>
</ul>
<h4 id="fault-tolerant-firewalls">Fault Tolerant Firewalls</h4>
<p>A fault tolerant firewall set would include a mechanism to duplicate each of the firewalls, as shown in Figure 4.</p>
<p><img src="images/cc700828.mod156_1(en-us,technet.10).gif" alt="Figure 4. Fault Tolerant Firewalls" title="Figure 4. Fault Tolerant Firewalls" data-linktype="relative-path"></p>
<p><strong>Figure 4. Fault Tolerant Firewalls</strong></p>
<p>Use of a fault tolerant firewall set offers the following advantages and disadvantages.</p>
<h5 id="advantages-7">Advantages</h5>
<p>The advantages of a fault tolerant firewall set include:</p>
<ul>
<li><p>Fault tolerance</p>
<p>Using pairs of servers or devices can help provide the required level of fault tolerance.</p>
</li>
<li><p>Central logging</p>
<p>All traffic logging is central to a pair of devices with good connectivity between them.</p>
</li>
<li><p>State sharing possible</p>
<p>Depending on the device vendor, firewalls in this tier may be able to share the state of sessions between them.</p>
</li>
</ul>
<h5 id="disadvantages-7">Disadvantages</h5>
<p>The disadvantages of a fault tolerant firewall set include:</p>
<ul>
<li><p>Increased complexity</p>
<p>The setup and support of this type of solution is more complex due to the multi-path nature of the network traffic.</p>
</li>
<li><p>Complex configuration</p>
<p>The separate sets of firewall rules can lead to security holes and support issues if not correctly configured.</p>
</li>
</ul>
<p>In the preceding scenarios, the firewall could be hardware- or software-based. In the previous figures, the firewall is serving as the gateway between the organization and the Internet but the border router is placed outside the firewall. This router is extremely vulnerable to intrusion, and so it also must have certain firewall features configured. Limited firewall capabilities could be implemented without a full firewall feature set, relying on the firewall device to prevent total intrusion. Alternatively, the firewall could be consolidated within the router with no additional stand-alone firewall device.</p>
<h4 id="fault-tolerant-firewall-configurations">Fault Tolerant Firewall Configurations</h4>
<p>When implementing a fault tolerant firewall set (often referred to as a cluster), there are two primary approaches, as described in the following sections.</p>
<h5 id="activepassive-fault-tolerant-firewall-set">Active/Passive Fault Tolerant Firewall Set</h5>
<p>In an active/passive fault tolerant firewall set, one device handles all the traffic while the other device does nothing. There is typically a convention through which both devices are communicating either the availability and/or the state of the connection to partner nodes. This communication is often called a heartbeat, which each system signals to the other, several times a second, to ensure connections are being handled by the partner node. When the passive node does not receive a heartbeat from the active node at a specific user-defined interval, it then assumes the active role.</p>
<p>An active/passive fault tolerant firewall set is depicted in the Figure 5:</p>
<p><img src="images/cc700828.mod156_2(en-us,technet.10).gif" alt="Figure 5. Active/Passive Fault-Tolerant Firewall Set " title="Figure 5. Active/Passive Fault-Tolerant Firewall Set " data-linktype="relative-path"></p>
<p><strong>Figure 5. Active/Passive Fault-Tolerant Firewall Set</strong></p>
<p>The use of an active/passive fault tolerant firewall set has the following advantages and disadvantages.</p>
<h5 id="advantages-8">Advantages</h5>
<p>The advantages of the active/passive fault tolerant firewall set include:</p>
<ul>
<li><p>Simple configuration</p>
<p>This configuration is simple to set up and troubleshoot, because only a single network path is active at any one time.</p>
</li>
<li><p>Predictable failover load</p>
<p>Because the whole traffic load switches to the passive node at failover, it is easy to plan for the traffic that the passive node is expected to manage.</p>
</li>
</ul>
<h5 id="disadvantages-8">Disadvantages</h5>
<p>The disadvantages of the active/passive fault tolerant firewall set include:</p>
<ul>
<li><p>Inefficient configuration</p>
<p>The active/passive fault tolerant firewall set is inefficient, because the passive node provides no useful function to the network during normal operation.</p>
</li>
</ul>
<h5 id="activeactive-fault-tolerant-firewall-set">Active/Active Fault Tolerant Firewall Set</h5>
<p>In an active/active fault tolerant firewall set, two or more nodes are actively listening to all of the requests sent to a virtual IP address that every node shares. The load is distributed between the nodes through algorithms unique to the fault tolerance mechanism in use, or through static user-based configuration, so that each node is actively filtering different traffic at the same time. In the event that one node fails, the surviving nodes distribute the processing of the load that the failed node had previously assumed.</p>
<p>An active/active fault tolerant firewall set is depicted in Figure 6:</p>
<p><img src="images/cc700828.mod156_3(en-us,technet.10).gif" alt="Figure 6. Active/Active Fault Tolerant Firewall Set " title="Figure 6. Active/Active Fault Tolerant Firewall Set " data-linktype="relative-path"></p>
<p><strong>Figure 6. Active/Active Fault Tolerant Firewall Set</strong></p>
<p>Use of an active/active fault tolerant firewall set offers the following advantages and disadvantages.</p>
<h5 id="advantages-9">Advantages</h5>
<p>The advantages of the active/active fault tolerant firewall set include:</p>
<ul>
<li><p>Greater efficiency</p>
<p>Because both firewalls are providing a service to the network, this configuration is more efficient than an active/passive fault tolerant firewall set.</p>
</li>
<li><p>Higher throughput</p>
<p>During normal operation, this configuration can handle higher levels of traffic compared with the active/passive configuration, because both firewalls can provide service to the network simultaneously.</p>
</li>
</ul>
<h5 id="disadvantages-9">Disadvantages</h5>
<p>The disadvantages of the active/active fault tolerant firewall set include:</p>
<ul>
<li><p>Subject to potential overload</p>
<p>If one node fails, the hardware resources on the remaining node(s) may be insufficient to handle the total throughput requirement. It is important to plan for this accordingly, understanding that performance degradation is likely to occur as the surviving nodes take on the additional workload when a node fails.</p>
</li>
<li><p>Increased complexity</p>
<p>Because the network traffic can pass through two routes, troubleshooting becomes more complex.</p>
</li>
</ul>
<h3 id="security">Security</h3>
<p>Security of firewall products is of paramount importance. Although there are no industry standards for firewall security, the vendor-independent International Computer Security Association (ICSA) runs a certification program aimed at testing the security of commercially available firewall products. The ICSA tests a significant number of products available in the market today (for further information, refer to <a href="https://www.icsalabs.com/" data-linktype="external">www.icsalabs.com</a>).</p>
<p>You must take care to ensure that a firewall achieves the requisite security standards; one way of doing this is to achieve ICSA certification. In addition, check whether your chosen firewall has an existing track record. A number of security vulnerability databases are available on the Internet; you should scan these to see how many vulnerabilities the product has been susceptible to in the past and their significance.</p>
<p>Unfortunately, all products (hardware- and software-based) have bugs. In addition to determining the number and severity of bugs that have affected the product you are thinking of buying, you should also assess the responsiveness of the vendor to the exposed vulnerabilities.</p>
<h3 id="scalability-1">Scalability</h3>
<p>This section addresses the scalability requirement of a firewall solution. Scalability of firewalls is largely determined by the performance characteristics of the device, and it is wise to select a firewall that will scale to meet the scenarios it will face in practice. There are two basic ways to achieve scalability. They are:</p>
<ul>
<li><p>Vertical Scaling (Scaling Up)</p>
<p>Whether the firewall is a hardware device or a software solution running on a server, varying degrees of scalability can be achieved by increasing the amount of memory, CPU processing power, and throughput of network interfaces. However, each device or server has a finite cap in terms of how far it can be vertically scaled. For example, while you may purchase a server that has sockets for four CPUs and you start with two, you will only ever be able to add two more CPUs.</p>
</li>
<li><p>Horizontal Scaling (Scaling Out)</p>
<p>Once a server has been vertically scaled to its limit, horizontal scaling becomes important. Most firewalls (hardware- and software-based) have the ability to scale out through the use of some form of load balancing. In such a scenario, multiple servers are arranged into a cluster, which is seen by the clients on the network as just one server. This scenario is essentially the same as the active/active cluster described in the "Firewall Availability" section earlier in the module. The technology used to provide this functionality may or may not be the same as that described earlier, and will be dependent on the vendor.</p>
</li>
</ul>
<p>Scaling up hardware firewalls can be difficult. However, some hardware firewall manufacturers offer scale out solutions because their devices can be stacked to operate as a single, load balanced unit.</p>
<p>Some software-based firewalls are designed to scale up through the use of multiple processors. The firewall itself does not usually address multiprocessing, which is controlled by the underlying operating system. However, the firewall needs to be able to address the hardware to be able to fully use this capability. This approach allows scaling on single or redundant devices, as opposed to hardware-based firewalls, which are usually set to whatever hardware limitations are built into the device at the time of manufacture. Most firewalls are classified by the number of concurrent connections that a device can handle. Hardware devices often need to be replaced if connection requirements exceed what is available to the fixed-scale model of the device.</p>
<p>As discussed earlier, fault tolerance may be built into the operating system of a firewall server. In the case of a hardware firewall, fault tolerance is likely to be an extra cost.</p>
<h3 id="performance">Performance</h3>
<p>A number of technologies are available to enhance the performance of a firewall, including:</p>
<ul>
<li><p>Gigabit Ethernet/Fiber Support</p>
</li>
<li><p>Proxy, Reverse Web Proxy, and Caching</p>
</li>
<li><p>SSL Off-loading Interfaces</p>
</li>
<li><p>IPSec Off-loading Interfaces</p>
</li>
</ul>
<p>For software-based firewalls, each one of these technologies is commercially available from multiple vendors, which keeps the costs low. While there may be similar third party solutions available for hardware devices, often they can only be obtained from the manufacturer of the hardware firewall itself.</p>
<p>The following sections discuss each of these performance-enhancing technologies.</p>
<h4 id="gigabit-ethernetfiber-support">Gigabit Ethernet/Fiber Support</h4>
<p>Many switches, routers, and firewalls can handle Ethernet gigabit speed interfaces, and the reduction in cost of these interfaces has increased their popularity. This capability greatly reduces the likelihood of interfaces becoming bottlenecks in firewall deployments.</p>
<h4 id="proxy-reverse-web-proxy-and-caching">Proxy, Reverse Web Proxy, and Caching</h4>
<p>Typically, the caching ability is only available on software-based firewalls, because it requires the use of a disk to cache traffic or data.</p>
<h4 id="ssl-off-loading-interfaces">SSL Off-loading Interfaces</h4>
<p>SSL accelerator cards can improve the performance of publicly exposed Web sites that use SSL-based encryption by offloading the encryption processing from the CPU of the firewall. When SSL is terminated at the firewall, these devices offer significant benefits.</p>
<h4 id="ipsec-off-loading-interfaces">IPSec Off-loading Interfaces</h4>
<p>IPSec accelerator cards can improve the performance of publicly exposed services that use IPSec-based encryption, such as VPN. These devices offload the encryption processing from the CPU of the firewall. IPSec off-loading can be used for traffic that communicates between the internal interface of the firewall and a published service, thus ensuring that the traffic traversing the perimeter network is encrypted between the perimeter network hosts.</p>
<h3 id="consolidation">Consolidation</h3>
<p>Consolidation means either incorporating the firewall service in another device, or incorporating other services in the firewall. Consolidation benefits include:</p>
<ul>
<li><p>Lower purchase price</p>
<p>By incorporating the firewall service in another service, for example in a router, you can save the cost of a hardware device, although you must still purchase the firewall software. Similarly, by incorporating other services in the firewall, you can save the cost of additional hardware.</p>
</li>
<li><p>Reduced inventory and management costs</p>
<p>By reducing the number of hardware devices, you can reduce operating costs, since fewer hardware upgrades are required, cabling is simplified, and management is simpler.</p>
</li>
<li><p>Higher performance</p>
<p>Depending upon what consolidation is achieved, you can improve performance. For example, by incorporating Web server caching in the firewall, you may cut out additional devices, allowing the services talk to each other at high speed rather than over an Ethernet cable.</p>
</li>
</ul>
<p>Examples of consolidation include:</p>
<ul>
<li><p>Adding firewall services to the border router</p>
<p>Most routers can have a firewall service available in them. The capabilities of this firewall service may be very simple in low cost routers, but high-end routers will usually have a very capable firewall service. In practice, although you may have a separate perimeter firewall, the border router should always have its firewall service active, to protect both the router itself and the border switches.</p>
</li>
<li><p>Adding firewall services to the border switch</p>
<p>Depending upon the border switch selected, it may be possible to add in the perimeter firewall as a blade, reducing costs, and improving performance.</p>
</li>
<li><p>Adding proxy cache to the perimeter firewall</p>
<p>Proxy caching stores frequently-accessed Web pages, so that the next requestor is delivered a page from the cache rather than having to re-access the Web server, which improves response times and reduces the Web server load. Generally, this can only be incorporated in a server firewall, as it requires a local hard disk to hold the cache.</p>
</li>
</ul>
<p>When considering consolidating other services onto the same server or device that provides the firewall service, you should take care to ensure that the use of a given service does not compromise the availability, security, manageability, or performance of the firewall. Performance considerations are also important, as the load generated by additional services will degrade the performance of the firewall service.</p>
<p>An alternative approach to consolidating services onto the same device, or server hosting the firewall service, is to consolidate a firewall hardware device as a blade in a switch. This approach usually costs less than a standalone firewall of any type, and can take advantage of the availability features of the switch, such as dual power supplies. Such a configuration is also easier to manage, because it is not a separate device. In addition, it usually runs faster, because it uses the switch's bus, which is much faster than external cabling.</p>
<h3 id="standards-and-guidelines">Standards and Guidelines</h3>
<p>Most Internet protocols that use version 4 of the Internet Protocol (IPv4) can be protected by a firewall, including lower-level protocols such as TCP and UDP, and higher-level protocols such as HTTP, SMTP, and FTP. Any firewall product under consideration should be reviewed to ensure that it supports the required type of traffic. Some firewalls can also interpret GRE, which is the encapsulation protocol for the point-to-point tunneling protocol (PPTP) used in some VPN implementations.</p>
<p>Some firewalls have built-in application layer filters for protocols such as HTTP, SSL, DNS, FTP, SOCKS v4, RPC, SMTP, H. 323, and post office protocol (POP).</p>
<h3 id="summary">Summary</h3>
<p>This module has provided a practical process for the successful selection of firewall products. This process covers all aspects of firewall design, including the various evaluation and classification processes required to reach a solution.</p>
<p>No firewall is 100% safe: the only way to ensure that your network cannot be attacked electronically from the outside is to implement an air gap between it and all other systems and networks. The result would be a secure network that is virtually unusable. Firewalls enable you to implement an appropriate level of security protection when connecting your network to an external network, or when joining two internal networks.</p>
<p>The firewall strategies and design processes outlined in this module should be considered only as part of an overall security strategy, because a strong firewall is of limited value if there are weaknesses in other parts of the environment. Security must be applied to every component of the network, and a security policy that addresses the risks inherent in the environment must be defined for every component.</p>
<h3 id="references">References</h3>
<p>You can find further information about design and deployment of firewall services from the following URLs.</p>
<ul>
<li><p>For an overview of firewalls:</p>
<p><a href="cc700820(v=technet.10)" data-linktype="relative-path">www.microsoft.com/technet/security/guidance/networksecurity/firewall.mspx</a></p>
</li>
<li><p>For detailed security information on Microsoft Windows Server 2003, refer to the "Windows Server 2003 Security Center" document:</p>
<p><a href="https://www.microsoft.com/technet/security/prodtech/windowsserver2003.mspx" data-linktype="external">https://www.microsoft.com/technet/security/prodtech/windowsserver2003.mspx</a></p>
</li>
<li><p>For information on Microsoft Internet Security &amp; Acceleration Server firewall and Web proxy product, refer to:</p>
<p><a href="https://www.microsoft.com/isaserver/" data-linktype="external">https://www.microsoft.com/isaserver/</a></p>
</li>
<li><p>For a free e-mail notification service that Microsoft uses to send information about the security of Microsoft products to subscribers, visit the Microsoft Security Notification Service Web site:</p>
<p><a href="https://www.microsoft.com/technet/security/bulletin/notify.mspx" data-linktype="external">www.microsoft.com/technet/security/bulletin/notify.mspx</a></p>
</li>
<li><p>The SANS (SysAdmin, Audit, Network, and Security) Institute security resources are available from:</p>
<p><a href="https://www.sans.org/" data-linktype="external">https://www.sans.org</a></p>
</li>
<li><p>The Computer Emergency Response Team (CERT) organization records and publishes security alerts and a center for security expertise at:</p>
<p><a href="https://www.cert.org/" data-linktype="external">https://www.cert.org</a></p>
</li>
</ul>
<p><strong>Download the Complete Solution</strong></p>
<p><a href="https://www.microsoft.com/downloads/details.aspx?familyid=d44e34ec-b4e2-49a1-9f40-9ed4ba3765df&amp;displaylang=en" data-linktype="external">Windows Server System Reference Architecture</a></p>
</div><div id="ms--inline-notifications" class="margin-block-xs" data-bi-name="inline-notification"></div><div id="assertive-live-region" role="alert" aria-live="assertive" class="visually-hidden" aria-relevant="additions" aria-atomic="true"></div>
							<div id="polite-live-region" role="status" aria-live="polite" class="visually-hidden" aria-relevant="additions" aria-atomic="true"></div>
							<!-- </content> -->

						</main><!-- recommendations section --><!-- end recommendations section -->

						<!-- feedback section --><!-- end feedback section -->

						<!-- feedback report section --><!-- end feedback report section --><aside
								id="ms--additional-resources-mobile"
								aria-label="Additional resources"
								class="display-none-desktop display-none-print"
							>
								<hr class="hr" hidden />
								<h2 id="ms--additional-resources-mobile-heading" class="title is-3" hidden>Additional resources</h2>
								<section id="right-rail-recommendations-mobile" data-bi-name="recommendations" hidden></section>
								<section id="right-rail-training-mobile" data-bi-name="learning-resources-card" hidden></section>
								<section id="right-rail-events-mobile" data-bi-name="events-card" hidden></section>
								<section id="right-rail-qna-mobile" data-bi-name="qna-link-card" hidden></section>
							</aside><div class="border-top is-visible-interactive has-default-focus margin-top-sm "><footer id="footer-interactive" data-bi-name="footer" class="footer-layout"><div class="display-flex gap-xs flex-wrap-wrap is-full-height padding-right-lg-desktop"><a
				data-mscc-ic="false"
				class="locale-selector-link button button-sm button-clear flex-shrink-0"
				href="#"
				data-bi-name="select-locale">
					<span class="icon" aria-hidden="true">
						<span class="docon docon-world"></span>
					</span>
					<span class="local-selector-link-text"></span></a><div class="ccpa-privacy-link" data-ccpa-privacy-link hidden>
<a
	href="https://aka.ms/yourcaliforniaprivacychoices"
	class="button button-sm button-clear flex-shrink-0"
	data-mscc-ic="false"
	data-bi-name="your-privacy-choices"
>
	<svg
		role="img"
		aria-label="California Consumer Privacy Act (CCPA) Opt-Out Icon"
		xmlns="http://www.w3.org/2000/svg"
		viewBox="0 0 30 14"
		xml:space="preserve"
		height="16"
		width="43"
		focusable="false"
	>
		<title>California Consumer Privacy Act (CCPA) Opt-Out Icon</title>
		<path d="M7.4 12.8h6.8l3.1-11.6H7.4C4.2 1.2 1.6 3.8 1.6 7s2.6 5.8 5.8 5.8z" style="fill-rule:evenodd;clip-rule:evenodd;fill:#fff"></path>
		<path d="M22.6 0H7.4c-3.9 0-7 3.1-7 7s3.1 7 7 7h15.2c3.9 0 7-3.1 7-7s-3.2-7-7-7zm-21 7c0-3.2 2.6-5.8 5.8-5.8h9.9l-3.1 11.6H7.4c-3.2 0-5.8-2.6-5.8-5.8z" style="fill-rule:evenodd;clip-rule:evenodd;fill:#06f"></path>
		<path d="M24.6 4c.2.2.2.6 0 .8L22.5 7l2.2 2.2c.2.2.2.6 0 .8-.2.2-.6.2-.8 0l-2.2-2.2-2.2 2.2c-.2.2-.6.2-.8 0-.2-.2-.2-.6 0-.8L20.8 7l-2.2-2.2c-.2-.2-.2-.6 0-.8.2-.2.6-.2.8 0l2.2 2.2L23.8 4c.2-.2.6-.2.8 0z" style="fill:#fff"></path>
		<path d="M12.7 4.1c.2.2.3.6.1.8L8.6 9.8c-.1.1-.2.2-.3.2-.2.1-.5.1-.7-.1L5.4 7.7c-.2-.2-.2-.6 0-.8.2-.2.6-.2.8 0L8 8.6l3.8-4.5c.2-.2.6-.2.9 0z" style="fill:#06f"></path>
	</svg>
	<span>Your Privacy Choices</span>
</a>

		</div>
		<div class="flex-shrink-0">
<div class="dropdown has-caret-up">
	<button class="dropdown-trigger button button-clear button-sm has-inner-focus theme-dropdown-trigger"
		aria-controls="theme-menu-interactive" aria-expanded="false" title="Theme" data-bi-name="theme">
		<span class="icon">
			<span class="docon docon-sun" aria-hidden="true"></span>
		</span>
		<span>Theme</span>
		<span class="icon expanded-indicator" aria-hidden="true">
			<span class="docon docon-chevron-down-light"></span>
		</span>
	</button>
	<div class="dropdown-menu" id="theme-menu-interactive" role="menu">
		<ul class="theme-selector padding-xxs" role="none">
			<li class="theme display-block" role="menuitem">
				<button class="button button-clear button-sm theme-control button-block justify-content-flex-start"
					data-theme-to="light">
					<span class="theme-light margin-right-xxs">
						<span
							class="theme-selector-icon border display-inline-block has-body-background"
							aria-hidden="true">
							<svg class="svg" xmlns="http://www.w3.org/2000/svg"
								viewBox="0 0 22 14">
								<rect width="22" height="14" class="has-fill-body-background" />
								<rect x="5" y="5" width="12" height="4" class="has-fill-secondary" />
								<rect x="5" y="2" width="2" height="1" class="has-fill-secondary" />
								<rect x="8" y="2" width="2" height="1" class="has-fill-secondary" />
								<rect x="11" y="2" width="3" height="1" class="has-fill-secondary" />
								<rect x="1" y="1" width="2" height="2" class="has-fill-secondary" />
								<rect x="5" y="10" width="7" height="2" rx="0.3" class="has-fill-primary" />
								<rect x="19" y="1" width="2" height="2" rx="1" class="has-fill-secondary" />
							</svg>
						</span>
					</span>
					<span>Light</span>
				</button>
			</li>
			<li class="theme display-block" role="menuitem">
				<button class="button button-clear button-sm theme-control button-block justify-content-flex-start"
					data-theme-to="dark">
					<span class="theme-dark margin-right-xxs">
						<span
							class="border theme-selector-icon display-inline-block has-body-background"
							aria-hidden="true">
							<svg class="svg" xmlns="http://www.w3.org/2000/svg"
								viewBox="0 0 22 14">
								<rect width="22" height="14" class="has-fill-body-background" />
								<rect x="5" y="5" width="12" height="4" class="has-fill-secondary" />
								<rect x="5" y="2" width="2" height="1" class="has-fill-secondary" />
								<rect x="8" y="2" width="2" height="1" class="has-fill-secondary" />
								<rect x="11" y="2" width="3" height="1" class="has-fill-secondary" />
								<rect x="1" y="1" width="2" height="2" class="has-fill-secondary" />
								<rect x="5" y="10" width="7" height="2" rx="0.3" class="has-fill-primary" />
								<rect x="19" y="1" width="2" height="2" rx="1" class="has-fill-secondary" />
							</svg>
						</span>
					</span>
					<span>Dark</span>
				</button>
			</li>
			<li class="theme display-block" role="menuitem">
				<button class="button button-clear button-sm theme-control button-block justify-content-flex-start"
					data-theme-to="high-contrast">
					<span class="theme-high-contrast margin-right-xxs">
						<span
							class="border theme-selector-icon display-inline-block has-body-background"
							aria-hidden="true">
							<svg class="svg" xmlns="http://www.w3.org/2000/svg"
								viewBox="0 0 22 14">
								<rect width="22" height="14" class="has-fill-body-background" />
								<rect x="5" y="5" width="12" height="4" class="has-fill-secondary" />
								<rect x="5" y="2" width="2" height="1" class="has-fill-secondary" />
								<rect x="8" y="2" width="2" height="1" class="has-fill-secondary" />
								<rect x="11" y="2" width="3" height="1" class="has-fill-secondary" />
								<rect x="1" y="1" width="2" height="2" class="has-fill-secondary" />
								<rect x="5" y="10" width="7" height="2" rx="0.3" class="has-fill-primary" />
								<rect x="19" y="1" width="2" height="2" rx="1" class="has-fill-secondary" />
							</svg>
						</span>
					</span>
					<span>High contrast</span>
				</button>
			</li>
		</ul>
	</div>
</div>

		</div>
	</div>
	<ul class="links" data-bi-name="footerlinks">
		<li class="manage-cookies-holder" hidden></li><li><a class="external-link-indicator" data-mscc-ic="false" href="/en-us/previous-versions/" data-bi-name="archivelink">Previous Versions</a></li>
				<li><a class="external-link-indicator" data-mscc-ic="false" href="https://techcommunity.microsoft.com/t5/microsoft-learn-blog/bg-p/MicrosoftLearnBlog" data-bi-name="bloglink">Blog</a></li>
				<li><a class="external-link-indicator" data-mscc-ic="false" href="/en-us/contribute/" data-bi-name="contributorGuide">Contribute</a></li><li><a class="external-link-indicator" data-mscc-ic="false" href="https://go.microsoft.com/fwlink/?LinkId=521839" data-bi-name="privacy">Privacy</a></li><li><a class="external-link-indicator" data-mscc-ic="false" href="/en-us/legal/termsofuse" data-bi-name="termsofuse">Terms of Use</a></li><li><a class="external-link-indicator" data-mscc-ic="false" href="https://www.microsoft.com/legal/intellectualproperty/Trademarks/" data-bi-name="trademarks">Trademarks</a></li><li>&copy; Microsoft 2024</li>
	</ul>
</footer></div></div><div
							id="ms--additional-resources"
							class="right-container column is-4-desktop display-none display-block-desktop"
							data-bi-name="pageactions"
							role="complementary"
							aria-label="Additional resources"
						>
							<div id="affixed-right-container" class="margin-top-sm-tablet" data-bi-name="right-column">
								<h2 id="ms--additional-resources-heading" class="title is-6 margin-top-md" hidden>Additional resources</h2>
								<section id="right-rail-events" data-bi-name="events-card" hidden></section>
								<section id="right-rail-training" data-bi-name="learning-resources-card" hidden></section>
								<section id="right-rail-recommendations" data-bi-name="recommendations" hidden></section>
								<nav id="side-doc-outline" class="doc-outline" data-bi-name="intopic toc" aria-label="In this article">
									<h3>In this article</h3>
								</nav>
								<section id="right-rail-qna" class="margin-top-xxs" data-bi-name="qna-link-card" hidden></section>
							</div>
						</div></div>
				<!--end of div.columns -->

			</section>
			<!--end of .primary-holder -->

			<!-- interactive container -->
			<aside id="interactive-container" class="interactive-container is-visible-interactive column has-body-background-dark ">
			</aside>
			<!-- end of interactive container -->
		</div>

	</div>
	<!--end of .mainContainer -->

	<section class="border-top has-default-focus is-hidden-interactive margin-top-sm "><footer id="footer" data-bi-name="footer" class="footer-layout uhf-container has-padding" role="contentinfo"><div class="display-flex gap-xs flex-wrap-wrap is-full-height padding-right-lg-desktop"><a
				data-mscc-ic="false"
				class="locale-selector-link button button-sm button-clear flex-shrink-0"
				href="#"
				data-bi-name="select-locale">
					<span class="icon" aria-hidden="true">
						<span class="docon docon-world"></span>
					</span>
					<span class="local-selector-link-text"></span></a><div class="ccpa-privacy-link" data-ccpa-privacy-link hidden>
<a
	href="https://aka.ms/yourcaliforniaprivacychoices"
	class="button button-sm button-clear flex-shrink-0"
	data-mscc-ic="false"
	data-bi-name="your-privacy-choices"
>
	<svg
		role="img"
		aria-label="California Consumer Privacy Act (CCPA) Opt-Out Icon"
		xmlns="http://www.w3.org/2000/svg"
		viewBox="0 0 30 14"
		xml:space="preserve"
		height="16"
		width="43"
		focusable="false"
	>
		<title>California Consumer Privacy Act (CCPA) Opt-Out Icon</title>
		<path d="M7.4 12.8h6.8l3.1-11.6H7.4C4.2 1.2 1.6 3.8 1.6 7s2.6 5.8 5.8 5.8z" style="fill-rule:evenodd;clip-rule:evenodd;fill:#fff"></path>
		<path d="M22.6 0H7.4c-3.9 0-7 3.1-7 7s3.1 7 7 7h15.2c3.9 0 7-3.1 7-7s-3.2-7-7-7zm-21 7c0-3.2 2.6-5.8 5.8-5.8h9.9l-3.1 11.6H7.4c-3.2 0-5.8-2.6-5.8-5.8z" style="fill-rule:evenodd;clip-rule:evenodd;fill:#06f"></path>
		<path d="M24.6 4c.2.2.2.6 0 .8L22.5 7l2.2 2.2c.2.2.2.6 0 .8-.2.2-.6.2-.8 0l-2.2-2.2-2.2 2.2c-.2.2-.6.2-.8 0-.2-.2-.2-.6 0-.8L20.8 7l-2.2-2.2c-.2-.2-.2-.6 0-.8.2-.2.6-.2.8 0l2.2 2.2L23.8 4c.2-.2.6-.2.8 0z" style="fill:#fff"></path>
		<path d="M12.7 4.1c.2.2.3.6.1.8L8.6 9.8c-.1.1-.2.2-.3.2-.2.1-.5.1-.7-.1L5.4 7.7c-.2-.2-.2-.6 0-.8.2-.2.6-.2.8 0L8 8.6l3.8-4.5c.2-.2.6-.2.9 0z" style="fill:#06f"></path>
	</svg>
	<span>Your Privacy Choices</span>
</a>

		</div>
		<div class="flex-shrink-0">
<div class="dropdown has-caret-up">
	<button class="dropdown-trigger button button-clear button-sm has-inner-focus theme-dropdown-trigger"
		aria-controls="theme-menu" aria-expanded="false" title="Theme" data-bi-name="theme">
		<span class="icon">
			<span class="docon docon-sun" aria-hidden="true"></span>
		</span>
		<span>Theme</span>
		<span class="icon expanded-indicator" aria-hidden="true">
			<span class="docon docon-chevron-down-light"></span>
		</span>
	</button>
	<div class="dropdown-menu" id="theme-menu" role="menu">
		<ul class="theme-selector padding-xxs" role="none">
			<li class="theme display-block" role="menuitem">
				<button class="button button-clear button-sm theme-control button-block justify-content-flex-start"
					data-theme-to="light">
					<span class="theme-light margin-right-xxs">
						<span
							class="theme-selector-icon border display-inline-block has-body-background"
							aria-hidden="true">
							<svg class="svg" xmlns="http://www.w3.org/2000/svg"
								viewBox="0 0 22 14">
								<rect width="22" height="14" class="has-fill-body-background" />
								<rect x="5" y="5" width="12" height="4" class="has-fill-secondary" />
								<rect x="5" y="2" width="2" height="1" class="has-fill-secondary" />
								<rect x="8" y="2" width="2" height="1" class="has-fill-secondary" />
								<rect x="11" y="2" width="3" height="1" class="has-fill-secondary" />
								<rect x="1" y="1" width="2" height="2" class="has-fill-secondary" />
								<rect x="5" y="10" width="7" height="2" rx="0.3" class="has-fill-primary" />
								<rect x="19" y="1" width="2" height="2" rx="1" class="has-fill-secondary" />
							</svg>
						</span>
					</span>
					<span>Light</span>
				</button>
			</li>
			<li class="theme display-block" role="menuitem">
				<button class="button button-clear button-sm theme-control button-block justify-content-flex-start"
					data-theme-to="dark">
					<span class="theme-dark margin-right-xxs">
						<span
							class="border theme-selector-icon display-inline-block has-body-background"
							aria-hidden="true">
							<svg class="svg" xmlns="http://www.w3.org/2000/svg"
								viewBox="0 0 22 14">
								<rect width="22" height="14" class="has-fill-body-background" />
								<rect x="5" y="5" width="12" height="4" class="has-fill-secondary" />
								<rect x="5" y="2" width="2" height="1" class="has-fill-secondary" />
								<rect x="8" y="2" width="2" height="1" class="has-fill-secondary" />
								<rect x="11" y="2" width="3" height="1" class="has-fill-secondary" />
								<rect x="1" y="1" width="2" height="2" class="has-fill-secondary" />
								<rect x="5" y="10" width="7" height="2" rx="0.3" class="has-fill-primary" />
								<rect x="19" y="1" width="2" height="2" rx="1" class="has-fill-secondary" />
							</svg>
						</span>
					</span>
					<span>Dark</span>
				</button>
			</li>
			<li class="theme display-block" role="menuitem">
				<button class="button button-clear button-sm theme-control button-block justify-content-flex-start"
					data-theme-to="high-contrast">
					<span class="theme-high-contrast margin-right-xxs">
						<span
							class="border theme-selector-icon display-inline-block has-body-background"
							aria-hidden="true">
							<svg class="svg" xmlns="http://www.w3.org/2000/svg"
								viewBox="0 0 22 14">
								<rect width="22" height="14" class="has-fill-body-background" />
								<rect x="5" y="5" width="12" height="4" class="has-fill-secondary" />
								<rect x="5" y="2" width="2" height="1" class="has-fill-secondary" />
								<rect x="8" y="2" width="2" height="1" class="has-fill-secondary" />
								<rect x="11" y="2" width="3" height="1" class="has-fill-secondary" />
								<rect x="1" y="1" width="2" height="2" class="has-fill-secondary" />
								<rect x="5" y="10" width="7" height="2" rx="0.3" class="has-fill-primary" />
								<rect x="19" y="1" width="2" height="2" rx="1" class="has-fill-secondary" />
							</svg>
						</span>
					</span>
					<span>High contrast</span>
				</button>
			</li>
		</ul>
	</div>
</div>

		</div>
	</div>
	<ul class="links" data-bi-name="footerlinks">
		<li class="manage-cookies-holder" hidden></li><li><a class="external-link-indicator" data-mscc-ic="false" href="/en-us/previous-versions/" data-bi-name="archivelink">Previous Versions</a></li>
				<li><a class="external-link-indicator" data-mscc-ic="false" href="https://techcommunity.microsoft.com/t5/microsoft-learn-blog/bg-p/MicrosoftLearnBlog" data-bi-name="bloglink">Blog</a></li>
				<li><a class="external-link-indicator" data-mscc-ic="false" href="/en-us/contribute/" data-bi-name="contributorGuide">Contribute</a></li><li><a class="external-link-indicator" data-mscc-ic="false" href="https://go.microsoft.com/fwlink/?LinkId=521839" data-bi-name="privacy">Privacy</a></li><li><a class="external-link-indicator" data-mscc-ic="false" href="/en-us/legal/termsofuse" data-bi-name="termsofuse">Terms of Use</a></li><li><a class="external-link-indicator" data-mscc-ic="false" href="https://www.microsoft.com/legal/intellectualproperty/Trademarks/" data-bi-name="trademarks">Trademarks</a></li><li>&copy; Microsoft 2024</li>
	</ul>
</footer>

	</section>

	<div id="action-panel" role="region" aria-label="Action Panel" class="action-panel has-default-focus" tabindex="-1"></div>
</body>
</html>